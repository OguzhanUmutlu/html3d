const __eval=[],_eval=a=>new Promise(b=>__eval.push([a,b]));setInterval(()=>{__eval.forEach(([code,r])=>{try{r({data:eval(code)})}catch(e){r({error:e})}}),__eval.length=0});const _eval2=code=>eval(code);(async()=>{let E=new Map,r=new Promise(a=>addEventListener("load",a)),F=d=>{let b=d.children,c=[];for(let a=0;a<b.length;a++)c.push(b[a]),c.push(...F(b[a]));return c};class s{constructor(a,b,c,d){this.element=a,this.scene=b,this.camera=c,this.renderer=d,this.rendering=!0,this._f=[],this._listeners={},this.fonts=[],this.maximized=!1,this._lastMaximize=null,this.orbitControls=[],this.arcballControls=[],this.flyControls=[],this.firstPersonControls=[],this.pointerLockControls=[],this.trackballControls=[]}render(){this.emit("render"),this.emit("render.before"),this.orbitControls.forEach(a=>a.update()),this.flyControls.forEach(a=>a.update(a._clock.getDelta())),this.firstPersonControls.forEach(a=>a.update(a._clock.getDelta())),this.trackballControls.forEach(a=>a.update()),this.renderer.render(this.scene,this.camera),this._f.push(Date.now()+1e3),this._f=this._f.filter(a=>a>Date.now()),this.emit("render.after")}get canvas(){return this.renderer.domElement}get fps(){return this._f.length}get objects(){return this.scene.children}maximize(){this.maximized||(this._lastMaximize=[this.canvas.width,this.canvas.height]),this.maximized=!0,this.onResize()}unmaximize(){this.maximized=!1,this._lastMaximize&&(this.canvas.width=this._lastMaximize[0],this.canvas.height=this._lastMaximize[1]),this._lastMaximize=null,this.onResize()}onResize(){this.emit("resize"),this.maximized&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight);let{width:a,height:b}=this.canvas;this.camera.aspect=a/b,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,b),this.trackballControls.forEach(a=>a.update())}findById(a){return F(this.element).find(b=>b.id===a)}findByClass(a){return Array.from(this.element.getElementsByClassName(a))}findByTag(a){return Array.from(this.element.getElementsByTagName(a))}findByName(a){return F(this.element).find(b=>b.name===a)}findByQuery(a){return this.element.querySelector(a)}findObjectByElement(a){return E.get(a)}findObjectById(a){return this.findObjectByElement(this.findById(a))}findObjectByClass(a){return this.findObjectByElement(this.findByClass(a)[0])}findObjectByTag(a){return this.findObjectByElement(this.findByTag(a)[0])}findObjectByName(a){return this.findObjectByElement(this.findByName(a)[0])}findObjectByQuery(a){return this.findObjectByElement(this.findByQuery(a))}findObjectsByClass(a){return this.findByClass(a).map(a=>this.findObjectByElement(a))}findObjectsByTag(a){return this.findByTag(a).map(a=>this.findObjectByElement(a))}findObjectsByName(a){return this.findByName(a).map(a=>this.findObjectByElement(a))}on(a,b){this._listeners[a]=[...this._listeners[a]||[],[b,!0]]}once(a,b){this._listeners[a]=[...this._listeners[a]||[],[b,!1]]}off(a,b){this._listeners[a]=this._listeners[a].filter(a=>a[0]!==b)}async emit(c,...d){let a=this._listeners[c]||[];for(let b=0;b<a.length;b++){let e=a[b];await e[0](...d)}this._listeners[c]=a.filter(a=>a[1])}}addEventListener("resize",()=>u.forEach(a=>a.onResize()));let t=()=>{for(let a=0;a<u.length;a++)u[a].rendering&&u[a].render();requestAnimationFrame(t)},u=[],v,w=new Promise(a=>v=a);window.html3d={promise:w,findById:a=>u.find(b=>b.element.id===a),warnings:window.html3d?.warnings||{loadStart:!1,loadEnd:!0},_eval:_eval2},await r;let j=document.querySelectorAll("html3d"),G=a=>new Promise(c=>{let b=document.createElement("script");b.src=a,b.onload=c,document.head.appendChild(b)}),x=async(b,a,c)=>{try{if(!await b())throw new Error}catch(d){html3d.warnings.loadStart&&console.info("%cCouldn't find "+a+", trying to load it...","color:#ff0000"),await G(c),html3d.warnings.loadEnd&&console.info("%c"+a+" has been loaded.","color:#00ff00")}};await x(_=>THREE,"ThreeJS","https://threejs.org/build/three.min.js");let{Scene:y,PerspectiveCamera:z,WebGLRenderer:A}=THREE,H={front:THREE.FrontSide,back:THREE.BackSide,double:THREE.DoubleSide},c=(a,b)=>{if("number"==typeof a)return a;if(!a)return b;a=a.replaceAll("pi",Math.PI);try{let{sin:c,cos:d,tan:e,asin:f,acos:g,atan:h,atan2:i,sqrt:j,pow:k,abs:l,log:m,log2:n,log10:o,exp:p,min:q,max:r,floor:s,ceil:t,round:u,sign:v,PI:w,LN2:x,E:y,cosh:z,cbrt:A,imul:B,sinh:C,LN10:D,acosh:E,tanh:F,asinh:G,atanh:H,hypot:I,clz32:J,expm1:K,fround:L,log1p:M,LOG2E:N,LOG10E:O,random:P,SQRT1_2:Q,SQRT2:R,trunc:S}=Math;[..."+-*/^()"].some(b=>a.includes(b))&&(a=html3d._eval(a).toString())}catch(T){}return isNaN(1*a)?b:1*a},b=(a,b)=>null!==a?"false"!==a:b,B=(a,b,c)=>!b||b.includes(a)?a:c,k=(a,b)=>{let d=c(a,b);return(/^#[0-9a-f]{6}$/i.test(a)&&(d=c(a.replace("#","0x"),b)),/^#[0-9a-f]{3}$/i.test(a)&&(d=c("0x"+a.replace("#","")+a.replace("#",""),b)),/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/.test(a)&&(d=c("0x"+a.substring(4).split("").reverse().slice(1).reverse().join("").split(",").map(a=>(1*a.trimStart().trimEnd()||0).toString(16)).join(""),b)),isNaN(1*d))?b:d},l=(a,b)=>a.some(a=>!c(a))?b:2===(a=a.map(c)).length?new THREE.Vector2(...a):3===a.length?new THREE.Vector3(...a):4===a.length?new THREE.Vector4(...a):b,I=(a,b)=>{try{return JSON.parse(a)}catch(c){return b}},J=(a,b)=>H[a]||b,K=i=>{let j=new THREE.Shape,e=Array.from(i.children);for(let b=0;b<e.length;b++){let f=e[b];if("PATH"===f.tagName){let k=f.getAttribute("d").toString(),g=k.split(" "),l=null,h=()=>{if(l){switch(l){case"M":case"MOVE":case"MV":j.moveTo(...m);break;case"L":case"LINE":case"LN":j.lineTo(...m);break;case"Q":case"QUADRATIC":case"QD":case"QC":j.quadraticCurveTo(...m);break;case"C":case"B":case"BC":case"BEZIER":case"BZ":j.bezierCurveTo(...m);break;case"Z":case"CLOSE":case"CL":j.closePath()}m.length=0}},m=[];for(let d=0;d<g.length;d++){let a=g[d];[..."MLQCZB","MOVE","MV","LINE","LN","QUADRATIC","QD","QC","BEZIER","BZ","CLOSE","CL"].includes(a[0])?(h(),l=a[0]):a&&m.push(c(a,0))}h()}}return j},L=a=>new class extends THREE.Curve{getPoint(d,e=new THREE.Vector3){let b=b=>a?a.getAttribute(b):null,f=3*d-1.5,g=Math.sin(2*Math.PI*d);return e.set(c(b("tx"),f),c(b("ty"),g),c(b("tz"),0)).multiplyScalar(c(b("scalar"),5))}},M=(h,e,i)=>{if(!e)return;let j=[],f={x:"obj.position.x",y:"obj.position.y",z:"obj.position.z",rx:"obj.rotation.x",ry:"obj.rotation.y",rz:"obj.rotation.z",sx:"obj.scale.x",sy:"obj.scale.y",sz:"obj.scale.z"},g=e.split(";");for(let b=0;b<g.length;b++){let a=g[b].trim();if(a){if(/^\s*\w+\s*((\*\*)|\||&|[+\-*/])?\s*=\s*.+$/.test(a)){let d=a.indexOf("="),c=a.substring(0,d-1).trim(),k=a.substring(c.length,d+1).trim(),l=a.substring(d+1).trim();if(!f[c])return console.error(`[BEHAVIOR] Couldn't find the variable named ${c} at line ${b+1}: ${a}
Note: Variables: ${Object.keys(f).join()}`);j.push([c,k,l,b,a])}else console.error(`[BEHAVIOR] Invalid behavior at line ${b+1}: ${a}`)}}i.on("render.before",h._behaviorFunc=()=>{j.forEach(a=>{try{let{sin:b,cos:c,tan:d,asin:e,acos:g,atan:h,atan2:i,sqrt:k,pow:l,abs:m,log:n,log2:o,log10:p,exp:q,min:r,max:s,floor:t,ceil:u,round:v,sign:w,PI:x,LN2:y,E:z,cosh:A,cbrt:B,imul:C,sinh:D,LN10:E,acosh:F,tanh:G,asinh:H,atanh:I,hypot:J,clz32:K,expm1:L,fround:M,log1p:N,LOG2E:O,LOG10E:P,random:Q,SQRT1_2:R,SQRT2:S,trunc:T}=Math;html3d._eval(f[a[0]]+a[1]+a[2])}catch(U){return j=j.filter(b=>b!==a),console.error(`[BEHAVIOR] Couldn't parse the value at line ${a[3]+1}: ${a[2]}`)}})})},N=(e,f,c)=>{for(let b=0;b<c.length;b++){let a=c[b];a[2]||(a[2]=a[1].split("-").map((a,b)=>0===b?a:a.charAt(0).toUpperCase()+a.substring(1)).join(""));let d=a[0](f(a[1]),...a.slice(3));d&&(e[a[2]]=d)}},O={Object3D(d,a){d.position.x=c(a("x"),0),d.position.y=c(a("y"),0),d.position.z=c(a("z"),0),d.rotation.x=c(a("rotation-x"),0),d.rotation.y=c(a("rotation-y"),0),d.rotation.z=c(a("rotation-z"),0),d.quaternion.x=c(a("quaternion-x"),0),d.quaternion.y=c(a("quaternion-y"),0),d.quaternion.z=c(a("quaternion-z"),0),d.scale.x=c(a("scale-x"),1),d.scale.y=c(a("scale-y"),1),d.scale.z=c(a("scale-z"),1),l([a("look-at-x"),a("look-at-y"),a("look-at-z")])&&d.lookAt(l([a("look-at-x"),a("look-at-y"),a("look-at-z")])),N(d,a,[[b,"cast-shadow"],[b,"visible"],[b,"frustum-culled"],[b,"matrix-auto-update"],[b,"matrix-world-needs-update"],[b,"receive-shadow"],[c,"render-order"]])},Light(a,b){O.Object3D(a,b),N(a,b,[[k,"color"],[c,"intensity"]])},BufferGeometry(a,c){N(a,c,[[b,"morph-attributes"]])},LatheGeometry(a,b){O.BufferGeometry(a,b)},BoxGeometry(a,b){O.BufferGeometry(a,b)},CapsuleGeometry(a,b){O.LatheGeometry(a,b)},CircleGeometry(a,b){O.BufferGeometry(a,b)},ConeGeometry(a,b){O.CylinderGeometry(a,b)},CylinderGeometry(a,b){O.BufferGeometry(a,b)},PolyhedronGeometry(a,b){O.BufferGeometry(a,b)},DodecahedronGeometry(a,b){O.PolyhedronGeometry(a,b)},IcosahedronGeometry(a,b){O.PolyhedronGeometry(a,b)},OctahedronGeometry(a,b){O.PolyhedronGeometry(a,b)},PlaneGeometry(a,b){O.BufferGeometry(a,b)},RingGeometry(a,b){O.BufferGeometry(a,b)},ShapeGeometry(a,b){O.BufferGeometry(a,b)},SphereGeometry(a,b){O.BufferGeometry(a,b)},TetrahedronGeometry(a,b){O.PolyhedronGeometry(a,b)},TorusGeometry(a,b){O.BufferGeometry(a,b)},TorusKnotGeometry(a,b){O.BufferGeometry(a,b)},TubeGeometry(a,b){O.BufferGeometry(a,b)},ConvexGeometry(a,b){O.BufferGeometry(a,b)},ExtrudeGeometry(a,b){O.BufferGeometry(a,b)},TextGeometry(a,b){O.ExtrudeGeometry(a,b)},Material(a,d){N(a,d,[[c,"alpha-test"],[c,"alpha-to-coverage"],[c,"blend-dst"],[c,"blend-dst-alpha"],[c,"blend-equation"],[c,"blend-equation-alpha"],[c,"blend-src"],[c,"blend-src-alpha"],[b,"clip-intersection"],[b,"clip-shadows"],[b,"color-write"],[I,"defines"],[c,"depth-func"],[b,"depth-test"],[b,"depth-write"],[b,"stencil-write"],[c,"stencil-write-mask"],[c,"stencil-func"],[c,"stencil-ref"],[c,"stencil-func-mask"],[c,"stencil-fail"],[c,"stencil-z-fail"],[B,"name"],[c,"opacity"],[b,"polygon-offset"],[c,"polygon-offset-factor"],[c,"polygon-offset-units"],[B,"precision",null,["highp","mediump","lowp"]],[b,"premultiplied-alpha"],[b,"dithering"],[J,"shadow-side"],[J,"side"],[b,"tone-mapped"],[b,"transparent"],[b,"visible"],])},MeshBasicMaterial(a,d){O.Material(a,d),N(a,d,[[k,"color"],[c,"combine"],[b,"fog"],[c,"reflectivity"],[c,"refraction-ratio"],[b,"wireframe"],[B,"wireframe-line-cap","wireframeLinecap",["round","butt","square"]],[B,"wireframe-line-join","wireframeLinejoin",["round","bevel","miter"]],[c,"wireframe-line-width","wireframeLinewidth"]])},MeshPhongMaterial(d,a){O.Material(d,a),l([a("normal-scale-x"),a("normal-scale-y")])&&(d.normalScale=l([a("normal-scale-x"),a("normal-scale-y")])),N(d,a,[[c,"ao-map-intensity"],[c,"bump-scale"],[k,"color"],[c,"combine"],[c,"displacement-scale"],[c,"displacement-bias"],[k,"emissive"],[c,"emissive-intensity"],[c,"flat-shading"],[b,"fog"],[c,"light-map-intensity"],[c,"normal-map-type"],[c,"reflectivity"],[c,"refraction-ratio"],[c,"shininess"],[k,"specular"],[b,"wireframe"],[B,"wireframe-line-cap","wireframeLinecap"],[B,"wireframe-line-join","wireframeLinejoin"],[c,"wireframe-line-width","wireframeLinewidth"]])},LineBasicMaterial(a,d){O.Material(a,d),N(a,d,[[k,"color"],[b,"fog"],[c,"line-width","linewidth"],[B,"line-cap","linecap"],[B,"line-join","linejoin"]])},LineDashedMaterial(a,b){O.LineBasicMaterial(a,b),N(a,b,[[c,"dash-size"],[c,"gap-size"],[c,"scale"]])},MeshDepthMaterial(a,d){N(a,d,[[c,"displacement-scale"],[c,"displacement-bias"],[b,"fog"],[b,"wireframe"],[c,"wireframe-line-width","wireframeLinewidth"]])},PointLight(a,b){O.Light(a,b),N(a,b,[[c,"decay"],[c,"distance"],[c,"power"]])},AmbientLight(a,b){O.Light(a,b)},AmbientLightProbe(a,b){O.Light(a,b)},DirectionalLight(a,c){O.Light(a,c),N(a,c,[[b,"cast-shadow"]])},HemisphereLight(a,b){O.Light(a,b),N(a,b,[[k,"ground-color"]])},RectAreaLight(a,b){O.Light(a,b),N(a,b,[[c,"height"],[c,"width"],[c,"power"]])},SpotLight(a,d){O.Light(a,d),N(a,d,[[c,"angle"],[b,"cast-shadow"],[c,"decay"],[c,"distance"],[c,"penumbra"],[c,"power"]])},OrbitControls(a,d){N(a,d,[[b,"auto-rotate"],[c,"auto-rotate-speed"],[c,"damping-factor"],[b,"enabled"],[b,"enable-damping"],[b,"enable-pan"],[b,"enable-rotate"],[b,"enable-zoom"],[c,"key-pan-speed"],[c,"max-azimuth-angle"],[c,"max-distance"],[c,"max-polar-angle"],[c,"max-zoom"],[c,"min-azimuth-angle"],[c,"min-distance"],[c,"min-polar-angle"],[c,"min-zoom"],[c,"pan-speed"],[c,"rotate-speed"],[b,"screen-space-panning"]]),["left","right","up","bottom"].forEach(b=>{d("key-"+b)&&(a.keys[b.toUpperCase()]=d("key-"+b.toUpperCase()))}),["left","right","middle"].forEach(b=>{Q[d("mouse-"+b)]&&(a.mouseButtons[b.toUpperCase()]=Q[d("mouse-"+b)])}),["one","two"].forEach(b=>{Q[d("touch-"+b)]&&(a.touches[b.toUpperCase()]=Q[d("touch-"+b)])})},ArcballControls(a,d){N(a,d,[[b,"adjust-near-far"],[b,"cursor-zoom"],[c,"damping-factor"],[b,"enabled"],[b,"enable-animations"],[b,"enable-grid"],[b,"enable-pan"],[b,"enable-rotate"],[b,"enable-zoom"],[c,"focus-animation-time"],[c,"max-distance"],[c,"max-zoom"],[c,"min-distance"],[c,"min-zoom"],[c,"scale-factor"],[c,"w-max"],[c,"radius-factor"]])},FlyControls(a,d){N(a,d,[[b,"auto-forward"],[b,"drag-to-look"],[c,"movement-speed"],[c,"roll-speed"]])},FirstPersonControls(a,d){N(a,d,[[b,"active-look"],[b,"auto-forward"],[b,"constrain-vertical"],[b,"enabled"],[c,"height-coef"],[c,"height-max"],[c,"height-min"],[c,"height-speed"],[b,"look-vertical"],[c,"look-speed"],[b,"mouse-drag-on"],[c,"movement-speed"],[c,"vertical-max"],[c,"vertical-min"]])},PointerLockControls(a,b){N(a,b,[[c,"max-polar-angle"],[c,"min-polar-angle"],[c,"pointer-speed"]])},TrackballControls(d,a){N(d,a,[[c,"dynamic-damping-factor"],[b,"enabled"],[c,"max-distance"],[c,"min-distance"],[b,"no-pan"],[b,"no-zoom"],[c,"pan-speed"],[c,"rotate-speed"],[b,"static-moving"],[c,"zoom-speed"]]),d.keys=[B(a("key-orbit"),"KeyA"),B(a("key-zoom"),"KeyS"),B(a("key-pan"),"KeyD")],["left","right","middle"].forEach(b=>{Q[a("mouse-"+b)]&&(d.mouseButtons[b.toUpperCase()]=Q[a("mouse-"+b)])})}},C=a=>a.split("-").map(a=>a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()).join(""),m={async BoxGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.BoxGeometry(c(a("width"),1),c(a("height"),1),c(a("depth"),1),c(a("widthSegments"),1),c(a("heightSegments"),1),c(a("depthSegments"),1));return O.BoxGeometry(b,a),e&&E.set(d,b),b},async CapsuleGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.CapsuleGeometry(c(a("radius"),1),c(a("length"),1),c(a("cap-subdivisions"),8),c(a("radial-segments"),16));return O.CapsuleGeometry(b,a),e&&E.set(d,b),b},async CircleGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.CircleGeometry(c(a("radius"),1),c(a("segments"),8),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return O.CircleGeometry(b,a),e&&E.set(d,b),b},async ConeGeometry(g,e,f=!0){let a=a=>e.getAttribute(a),d=new THREE.ConeGeometry(c(a("radius"),1),c(a("height"),1),c(a("radial-segments"),8),c(a("height-segments"),1),b(a("open-ended"),!1),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return O.ConeGeometry(d,a),f&&E.set(e,d),d},async CylinderGeometry(g,e,f=!0){let a=a=>e.getAttribute(a),d=new THREE.CylinderGeometry(c(a("radius-top"),1),c(a("radius-bottom"),1),c(a("height"),1),c(a("radial-segments"),8),c(a("height-segments"),1),b(a("open-ended"),!1),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return O.CylinderGeometry(d,a),f&&E.set(e,d),d},async DodecahedronGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.DodecahedronGeometry(c(a("radius"),1),c(a("detail"),0));return O.DodecahedronGeometry(b,a),e&&E.set(d,b),b},async IcosahedronGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.IcosahedronGeometry(c(a("radius"),1),c(a("detail"),0));return O.IcosahedronGeometry(b,a),e&&E.set(d,b),b},async LatheGeometry(g,d,e=!0){let a=a=>d.getAttribute(a),f=Array.from(d.children).filter(a=>"POINT"===a.tagName).map(a=>new THREE.Vector2(c(a.getAttribute("x"),0),c(a.getAttribute("y"),0))),b=new THREE.LatheGeometry(f,c(a("segments"),12),c(a("phiStart"),0),c(a("phiLength"),2*Math.PI));return O.LatheGeometry(b,a),e&&E.set(d,b),b},async OctahedronGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.OctahedronGeometry(c(a("radius"),1),c(a("detail"),0));return O.OctahedronGeometry(b,a),e&&E.set(d,b),b},async PlaneGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.PlaneGeometry(c(a("width"),1),c(a("height"),1),c(a("width-segments"),1),c(a("height-segments"),1));return O.PlaneGeometry(b,a),e&&E.set(d,b),b},async RingGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.RingGeometry(c(a("inner-radius"),.5),c(a("outer-radius"),1),c(a("theta-segments"),8),c(a("phi-segments"),1),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return O.RingGeometry(b,a),e&&E.set(d,b),b},async ShapeGeometry(g,b,f=!0){let d=a=>b.getAttribute(a),e=K(Array.from(b.children).filter(a=>"SHAPE"===a.tagName).reverse()[0]);if(!e)return console.error("ShapeGeometry: No <shape> found");let a=new THREE.ShapeGeometry(e,c(d("curve-segments"),12));return O.ShapeGeometry(a,d),f&&E.set(b,a),a},async SphereGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.SphereGeometry(c(a("radius"),1),c(a("width-segments"),32),c(a("height-segments"),16),c(a("phi-start"),0),c(a("phi-length"),2*Math.PI),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return O.SphereGeometry(b,a),e&&E.set(d,b),b},async TetrahedronGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.TetrahedronGeometry(c(a("radius"),1),c(a("detail"),0));return O.TetrahedronGeometry(b,a),e&&E.set(d,b),b},async TorusGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.TorusGeometry(c(a("radius"),1),c(a("tube"),.4),c(a("radial-segments"),8),c(a("tubular-segments"),6),c(a("arc"),2*Math.PI));return O.TorusGeometry(b,a),e&&E.set(d,b),b},async TorusKnotGeometry(f,d,e=!0){let a=a=>d.getAttribute(a),b=new THREE.TorusKnotGeometry(c(a("radius"),1),c(a("tube"),.4),c(a("tubular-segments"),64),c(a("radial-segments"),8),c(a("p"),2),c(a("q"),3));return O.TorusKnotGeometry(b,a),e&&E.set(d,b),b},async TubeGeometry(h,e,g=!0){let a=a=>e.getAttribute(a),f=L(Array.from(e.children).filter(a=>"CURVE"===a.tagName).reverse()[0]);if(!f)return console.error("TubeGeometry: No <curve> found");let d=new THREE.TubeGeometry(f,c(a("tubular-segments"),64),c(a("radius"),1),c(a("radial-segments"),8),b(a("closed"),!1));return O.TubeGeometry(d,a),g&&E.set(e,d),d},async ConvexGeometry(g,b,d=!0){let e=a=>b.getAttribute(a);await x(_=>THREE.ConvexHull,"ConvexHull","https://threejs.org/examples/js/math/ConvexHull.js"),await x(_=>THREE.ConvexGeometry,"ConvexGeometry","https://threejs.org/examples/js/geometries/ConvexGeometry.js");let f=Array.from(b.children).filter(a=>"POINT"===a.tagName).map(a=>new THREE.Vector3(c(a.getAttribute("x"),0),c(a.getAttribute("y"),0),c(a.getAttribute("z"),0))),a=new THREE.ConvexGeometry(f);return O.ConvexGeometry(a,e),d&&E.set(b,a),a},async TextGeometry(f,d,h=!0){let a=a=>d.getAttribute(a);await x(_=>!THREE.TextGeometry.toString().includes("console.error"),"TextGeometry","https://threejs.org/examples/js/geometries/TextGeometry.js");let g=f.fonts.find(b=>[b.name,b.src].includes(B(a("font"))))||f.fonts.find(b=>b.familyName===B(a("font")));if(!g)return console.warn("Font not found: "+B(a("font")));d.style.display="none";let e=new THREE.TextGeometry(B(d.innerText),{font:g.font,size:c(a("size"),100),height:c(a("height"),50),curveSegments:c(a("curve-segments"),12),bevelEnabled:b(a("bevel"),!1),bevelThickness:c(a("bevel-thickness"),10),bevelSize:c(a("bevel-size"),8),bevelOffset:c(a("bevel-offset"),0),bevelSegments:c(a("bevel-segments"),3)});return O.TextGeometry(e,a),h&&E.set(d,e),e},async MeshBasicMaterial(f,c,d=!0){let e=a=>c.getAttribute(a),a={};O.MeshBasicMaterial(a,e);let b=new THREE.MeshBasicMaterial(a);return d&&E.set(c,b),b},async MeshPhongMaterial(f,c,d=!0){let e=a=>c.getAttribute(a),a={};O.MeshPhongMaterial(a,e);let b=new THREE.MeshPhongMaterial(a);return d&&E.set(c,b),b},async LineBasicMaterial(f,c,d=!0){let e=a=>c.getAttribute(a),a={};O.LineBasicMaterial(a,e);let b=new THREE.LineBasicMaterial(a);return d&&E.set(c,b),b},async LineDashedMaterial(f,c,d=!0){let e=a=>c.getAttribute(a),a={};O.LineDashedMaterial(a,e);let b=new THREE.LineDashedMaterial(a);return d&&E.set(c,b),b},async MeshDepthMaterial(f,c,d=!0){let e=a=>c.getAttribute(a),a={};O.MeshDepthMaterial(a,e);let b=new THREE.MeshDepthMaterial(a);return d&&E.set(c,b),b},async Mesh(d,h,i=!0){let a=a=>h.getAttribute(a),g=b=>{let a=Array.from(h.children).filter(a=>a.tagName.endsWith(b)&&m[C(a.tagName)]).reverse()[0];if(a)return m[C(a.tagName)](d,a,b=>a.getAttribute(b))},e=a("geometry")?d.element.querySelector(a("geometry")):await g("-GEOMETRY");e instanceof THREE.BufferGeometry||(e=new THREE.BoxGeometry);let f=a("material")?d.element.querySelector(a("material")):await g("-MATERIAL");f instanceof THREE.Material||(f=new THREE.MeshBasicMaterial);let c=new THREE.Mesh(e,f);return M(c,a("behavior"),d),O.Object3D(c,a),b(a("register"),!0)&&d.scene.add(c),i&&E.set(h,c),c},async PointLight(d,e,f=!0){let c=a=>e.getAttribute(a),a=new THREE.PointLight;return M(a,c("behavior"),d),O.PointLight(a,c),b(c("register"),!0)&&d.scene.add(a),f&&E.set(e,a),a},async AmbientLight(d,e,f=!0){let c=a=>e.getAttribute(a),a=new THREE.AmbientLight;return M(a,c("behavior"),d),O.AmbientLight(a,c),b(c("register"),!0)&&d.scene.add(a),f&&E.set(e,a),a},async AmbientLightProbe(d,e,f=!0){let c=a=>e.getAttribute(a),a=new THREE.AmbientLightProbe;return M(a,c("behavior"),d),O.AmbientLightProbe(a,c),b(c("register"),!0)&&d.scene.add(a),f&&E.set(e,a),a},async DirectionalLight(d,e,f=!0){let c=a=>e.getAttribute(a),a=new THREE.DirectionalLight;return M(a,c("behavior"),d),O.DirectionalLight(a,c),b(c("register"),!0)&&d.scene.add(a),f&&E.set(e,a),a},async HemisphereLight(d,e,f=!0){let c=a=>e.getAttribute(a),a=new THREE.HemisphereLight;return M(a,c("behavior"),d),O.HemisphereLight(a,c),b(c("register"),!0)&&d.scene.add(a),f&&E.set(e,a),a},async RectAreaLight(d,e,f=!0){let c=a=>e.getAttribute(a),a=new THREE.RectAreaLight;return M(a,c("behavior"),d),O.RectAreaLight(a,c),b(c("register"),!0)&&d.scene.add(a),f&&E.set(e,a),a},async SpotLight(d,e,f=!0){let c=a=>e.getAttribute(a),a=new THREE.SpotLight;return M(a,c("behavior"),d),O.SpotLight(a,c),b(c("register"),!0)&&d.scene.add(a),f&&E.set(e,a),a},async OrbitControls(b,c,d=!0){let e=a=>c.getAttribute(a);await x(_=>THREE.OrbitControls,"OrbitControls","https://threejs.org/examples/js/controls/OrbitControls.js");let a=new THREE.OrbitControls(b.camera,b.renderer.domElement);return O.OrbitControls(a,e),b.orbitControls.push(a),d&&E.set(c,a),a},async ArcballControls(b,c,d=!0){let e=a=>c.getAttribute(a);await x(_=>THREE.ArcballControls,"ArcballControls","https://threejs.org/examples/js/controls/ArcballControls.js");let a=new THREE.ArcballControls(b.camera,b.renderer.domElement);return O.ArcballControls(a,e),b.arcballControls.push(a),d&&E.set(c,a),a},async FlyControls(b,c,d=!0){let e=a=>c.getAttribute(a);await x(_=>THREE.FlyControls,"FlyControls","https://threejs.org/examples/js/controls/FlyControls.js");let a=new THREE.FlyControls(b.camera,b.renderer.domElement);return O.FlyControls(a,e),b.flyControls.push(a),d&&E.set(c,a),a},async FirstPersonControls(b,c,d=!0){let e=a=>c.getAttribute(a);await x(_=>THREE.FirstPersonControls,"FirstPersonControls","https://threejs.org/examples/js/controls/FirstPersonControls.js");let a=new THREE.FirstPersonControls(b.camera,b.renderer.domElement);return O.FirstPersonControls(a,e),b.firstPersonControls.push(a),d&&E.set(c,a),a},async PointerLockControls(b,c,d=!0){let e=a=>c.getAttribute(a);await x(_=>THREE.PointerLockControls,"PointerLockControls","https://threejs.org/examples/js/controls/PointerLockControls.js");let a=new THREE.PointerLockControls(b.camera,b.renderer.domElement);return O.PointerLockControls(a,e),a.connect(),b.pointerLockControls.push(a),d&&E.set(c,a),a},async TrackballControls(b,c,d=!0){let e=a=>c.getAttribute(a);await x(_=>THREE.TrackballControls,"TrackballControls","https://threejs.org/examples/js/controls/TrackballControls.js");let a=new THREE.TrackballControls(b.camera,b.renderer.domElement);return O.TrackballControls(a,e),b.trackballControls.push(a),d&&E.set(c,a),a},async Font(d,c,e=!0){let b=a=>c.getAttribute(a);P||(await x(_=>THREE.FontLoader.prototype.load,"FontLoader","https://threejs.org/examples/js/loaders/FontLoader.js"),P=new THREE.FontLoader);let a=await new Promise(a=>P.load(b("src"),a,_=>_,_=>a(null)));return(E.set(c,a),a)?(d.fonts.push({src:b("src"),name:b("name"),familyName:a.data.familyName,font:a}),e&&E.set(c,a),a):console.error("Failed to load font: "+b("src"))}},P,Q={ROTATE:THREE.MOUSE.ROTATE,rotate:THREE.MOUSE.ROTATE,PAN:THREE.MOUSE.PAN,pan:THREE.MOUSE.PAN,DOLLY:THREE.MOUSE.DOLLY,dolly:THREE.MOUSE.DOLLY};for(let g=0;g<j.length;g++){let h=j[g],e=document.createElement("canvas"),a=a=>h.getAttribute(a);e.width=a("width")||512,e.height=a("height")||512,h.appendChild(e);let D=new y,f=new z(c(a("fov"),75),e.width/e.height,c(a("near"),.1),c(a("far"),1e3)),n=new A({canvas:e,alpha:b(a("alpha"),!1),premultipliedAlpha:b(a("premultipliedAlpha"),!0),antialias:b(a("antialias"),!1),stencil:b(a("stencil"),!0),preserveDrawingBuffer:b(a("preserveDrawingBuffer"),!1),powerPreference:B(a("powerPreference"),["high-performance","low-power","default"],"default"),failIfMajorPerformanceCaveat:b(a("failIfMajorPerformanceCaveat"),!1),depth:b(a("depth"),!0),logarithmicDepthBuffer:b(a("logarithmicDepthBuffer"),!1)}),o=Array.from(h.children);k(a("background-color"))&&n.setClearColor(k(a("background-color"))),l([a("look-at-x"),a("look-at-y"),a("look-at-z")])&&f.lookAt(l([a("look-at-x"),a("look-at-y"),a("look-at-z")]));let d=new s(h,D,f,n);for(let i=0;i<o.length;i++){let p=o[i],q=C(p.tagName);m[q]&&await m[q](d,p)}f.rotation.set(c(a("rotation-x"),0),c(a("rotation-y"),0),c(a("rotation-z"),0)),f.position.set(c(a("x"),0),c(a("y"),0),c(a("z"),0)),d.orbitControls.forEach(a=>{a.target.x=f.position.x,a.target.y=f.position.y}),d.arcballControls.forEach(a=>a.update()),u.push(d),b(a("maximize"))&&d.maximize(),b(a("center"))&&(d.element.style.position="absolute",d.element.style.left="50%",d.element.style.top="50%",d.element.style.transform="translate(-50%, -50%)")}v(),t()})()