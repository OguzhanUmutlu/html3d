const __eval=[],_eval=a=>new Promise(b=>__eval.push([a,b]));setInterval(()=>{__eval.forEach(([code,r])=>{try{r({data:eval(code)})}catch(e){r({error:e})}}),__eval.length=0});const _eval2=(code,___args___)=>eval(`${Object.keys(___args___).map(_=>`const ${_}=___args___[${JSON.stringify(_)}];`).join("")}${code}`);(async()=>{let f="undefined"!=typeof module&&"undefined"!=typeof require?module.exports={}:window,s,t=new Promise(a=>s=a);f.html3d={version:"1.0.6",promise:t,findById:a=>w.find(b=>b.element.id===a),warnings:f.html3d?.warnings||{loadStart:!1,loadEnd:!0},width:f.innerWidth||500,height:f.innerHeight||400,_eval:_eval2};let F=new Map,u=new Promise(a=>addEventListener("load",a)),G=d=>{let b=d.children,c=[];for(let a=0;a<b.length;a++)c.push(b[a]),c.push(...G(b[a]));return c};class v{constructor(a,b,c,d){this.element=a,this.scene=b,this.camera=c,this.renderer=d,this.rendering=!0,this._f=[],this._listeners={},this.fonts=[],this.maximized=!1,this._lastMaximize=null,this.orbitControls=[],this.arcballControls=[],this.flyControls=[],this.firstPersonControls=[],this.pointerLockControls=[],this.trackballControls=[]}render(){this.emit("render"),this.emit("render.before"),this.orbitControls.forEach(a=>a.update()),this.flyControls.forEach(a=>a.update(a._clock.getDelta())),this.firstPersonControls.forEach(a=>a.update(a._clock.getDelta())),this.trackballControls.forEach(a=>a.update()),this.renderer.render(this.scene,this.camera),this._f.push(Date.now()+1e3),this._f=this._f.filter(a=>a>Date.now()),this.emit("render.after")}get canvas(){return this.renderer.domElement}get fps(){return this._f.length}get objects(){return this.scene.children}maximize(){this.maximized||(this._lastMaximize=[this.canvas.width,this.canvas.height]),this.maximized=!0,this.onResize()}unmaximize(){this.maximized=!1,this._lastMaximize&&(this.canvas.width=this._lastMaximize[0],this.canvas.height=this._lastMaximize[1]),this._lastMaximize=null,this.onResize()}onResize(){f.html3d.width=f.innerWidth||f.html3d.width,f.html3d.height=f.innerHeight||f.html3d.height,this.emit("resize"),this.maximized&&(this.canvas.width=f.html3d.width,this.canvas.height=f.html3d.height);let{width:a,height:b}=this.canvas;this.camera.aspect=a/b,this.camera.updateProjectionMatrix(),this.renderer.setSize(a,b),this.trackballControls.forEach(a=>a.update())}findById(a){return G(this.element).find(b=>b.id===a)}findByClass(a){return Array.from(this.element.getElementsByClassName(a))}findByTag(a){return Array.from(this.element.getElementsByTagName(a))}findByName(a){return G(this.element).find(b=>b.name===a)}findByQuery(a){return this.element.querySelector(a)}findObjectByElement(a){return F.get(a)}findObjectById(a){return this.findObjectByElement(this.findById(a))}findObjectByClass(a){return this.findObjectByElement(this.findByClass(a)[0])}findObjectByTag(a){return this.findObjectByElement(this.findByTag(a)[0])}findObjectByName(a){return this.findObjectByElement(this.findByName(a)[0])}findObjectByQuery(a){return this.findObjectByElement(this.findByQuery(a))}findObjectsByClass(a){return this.findByClass(a).map(a=>this.findObjectByElement(a))}findObjectsByTag(a){return this.findByTag(a).map(a=>this.findObjectByElement(a))}findObjectsByName(a){return this.findByName(a).map(a=>this.findObjectByElement(a))}on(a,b){this._listeners[a]=[...this._listeners[a]||[],[b,!0]]}once(a,b){this._listeners[a]=[...this._listeners[a]||[],[b,!1]]}off(a,b){this._listeners[a]=this._listeners[a].filter(a=>a[0]!==b)}async emit(c,...d){let a=this._listeners[c]||[];for(let b=0;b<a.length;b++){let e=a[b];await e[0](...d)}this._listeners[c]=a.filter(a=>a[1])}}let w=[];addEventListener("resize",()=>w.forEach(a=>a.onResize()));let x=()=>{for(let a=0;a<w.length;a++)w[a].rendering&&w[a].render();requestAnimationFrame(x)};await u;let k=document.querySelectorAll("html3d"),H=a=>new Promise(c=>{let b=document.createElement("script");b.src=a,b.onload=c,document.head.appendChild(b)}),y=async(b,a,c)=>{try{if(!await b())throw new Error}catch(d){f.html3d.warnings.loadStart&&console.info("%cCouldn't find "+a+", trying to load it...","color:#ff0000"),await H(c),f.html3d.warnings.loadEnd&&console.info("%c"+a+" has been loaded.","color:#00ff00")}};await y(_=>THREE,"ThreeJS","https://threejs.org/build/three.min.js");let{Scene:z,PerspectiveCamera:A,WebGLRenderer:B}=THREE,I={front:THREE.FrontSide,back:THREE.BackSide,double:THREE.DoubleSide},c=(a,b)=>{if("number"==typeof a)return a;if(!a)return b;a=a.replaceAll("pi",Math.PI);try{let{sin:c,cos:d,tan:e,asin:g,acos:h,atan:i,atan2:j,sqrt:k,pow:l,abs:m,log:n,log2:o,log10:p,exp:q,min:r,max:s,floor:t,ceil:u,round:v,sign:w,PI:x,LN2:y,E:z,cosh:A,cbrt:B,imul:C,sinh:D,LN10:E,acosh:F,tanh:G,asinh:H,atanh:I,hypot:J,clz32:K,expm1:L,fround:M,log1p:N,LOG2E:O,LOG10E:P,random:Q,SQRT1_2:R,SQRT2:S,trunc:T}=Math;[..."+-*/^()"].some(b=>a.includes(b))&&(a=f.html3d._eval(a,{sin:c,cos:d,tan:e,asin:g,acos:h,atan:i,atan2:j,sqrt:k,pow:l,abs:m,log:n,log2:o,log10:p,exp:q,min:r,max:s,floor:t,ceil:u,round:v,sign:w,PI:x,LN2:y,E:z,cosh:A,cbrt:B,imul:C,sinh:D,LN10:E,acosh:F,tanh:G,asinh:H,atanh:I,hypot:J,clz32:K,expm1:L,fround:M,log1p:N,LOG2E:O,LOG10E:P,random:Q,SQRT1_2:R,SQRT2:S,trunc:T}).toString())}catch(U){}return isNaN(1*a)?b:1*a},b=(a,b)=>null!==a?"false"!==a:b,C=(a,b,c)=>!b||b.includes(a)?a:c,l=(a,b)=>{let e={black:0,silver:12632256,white:16777215,yellow:16776960,blue:255,teal:32896,aqua:65535,aliceblue:15792383,antiquewhite:16444375,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,blanchedalmond:16772045,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,whitesmoke:16119285,yellowgreen:10145074};if(e[a])return e[a];let d=c(a,b);return(/^#[0-9a-f]{6}$/i.test(a)&&(d=c(a.replace("#","0x"),b)),/^#[0-9a-f]{3}$/i.test(a)&&(d=c("0x"+a.replace("#","")+a.replace("#",""),b)),/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/.test(a)&&(d=c("0x"+a.substring(4).split("").reverse().slice(1).reverse().join("").split(",").map(a=>(1*a.trimStart().trimEnd()||0).toString(16)).join(""),b)),isNaN(1*d))?b:d},m=(a,b)=>a.some(a=>!c(a))?b:2===(a=a.map(c)).length?new THREE.Vector2(...a):3===a.length?new THREE.Vector3(...a):4===a.length?new THREE.Vector4(...a):b,J=(a,b)=>{try{return JSON.parse(a)}catch(c){return b}},K=(a,b)=>I[a]||b,L=i=>{let j=new THREE.Shape,e=Array.from(i.children);for(let b=0;b<e.length;b++){let f=e[b];if("PATH"===f.tagName){let k=f.getAttribute("d").toString(),g=k.split(" "),l=null,h=()=>{if(l){switch(l){case"M":case"MOVE":case"MV":j.moveTo(...m);break;case"L":case"LINE":case"LN":j.lineTo(...m);break;case"Q":case"QUADRATIC":case"QD":case"QC":j.quadraticCurveTo(...m);break;case"C":case"B":case"BC":case"BEZIER":case"BZ":j.bezierCurveTo(...m);break;case"Z":case"CLOSE":case"CL":j.closePath()}m.length=0}},m=[];for(let d=0;d<g.length;d++){let a=g[d];[..."MLQCZB","MOVE","MV","LINE","LN","QUADRATIC","QD","QC","BEZIER","BZ","CLOSE","CL"].includes(a[0])?(h(),l=a[0]):a&&m.push(c(a,0))}h()}}return j},M=a=>new class extends THREE.Curve{getPoint(d,e=new THREE.Vector3){let b=b=>a?a.getAttribute(b):null,f=3*d-1.5,g=Math.sin(2*Math.PI*d);return e.set(c(b("tx"),f),c(b("ty"),g),c(b("tz"),0)).multiplyScalar(c(b("scalar"),5))}},N=(i,e,j)=>{if(!e)return;let k=[],g={x:"object.position.x",y:"object.position.y",z:"object.position.z",rx:"object.rotation.x",ry:"object.rotation.y",rz:"object.rotation.z",sx:"object.scale.x",sy:"object.scale.y",sz:"object.scale.z"},h=e.split(";");for(let b=0;b<h.length;b++){let a=h[b].trim();if(a){if(/^\s*\w+\s*((\*\*)|\||&|[+\-*/])?\s*=\s*.+$/.test(a)){let d=a.indexOf("="),c=a.substring(0,d-1).trim(),l=a.substring(c.length,d+1).trim(),m=a.substring(d+1).trim();if(!g[c])return console.error(`[BEHAVIOR] Couldn't find the variable named ${c} at line ${b+1}: ${a}
Note: Variables: ${Object.keys(g).join()}`);k.push([c,l,m,b,a])}else console.error(`[BEHAVIOR] Invalid behavior at line ${b+1}: ${a}`)}}j.on("render.before",i._behaviorFunc=()=>{k.forEach(a=>{try{let{sin:b,cos:c,tan:d,asin:e,acos:h,atan:j,atan2:l,sqrt:m,pow:n,abs:o,log:p,log2:q,log10:r,exp:s,min:t,max:u,floor:v,ceil:w,round:x,sign:y,PI:z,LN2:A,E:B,cosh:C,cbrt:D,imul:E,sinh:F,LN10:G,acosh:H,tanh:I,asinh:J,atanh:K,hypot:L,clz32:M,expm1:N,fround:O,log1p:P,LOG2E:Q,LOG10E:R,random:S,SQRT1_2:T,SQRT2:U,trunc:V}=Math;f.html3d._eval(g[a[0]]+a[1]+a[2],{object:i})}catch(W){return k=k.filter(b=>b!==a),console.error(`[BEHAVIOR] Couldn't parse the value at line ${a[3]+1}: ${a[2]}`)}})})},O=(e,f,c)=>{for(let b=0;b<c.length;b++){let a=c[b];a[2]||(a[2]=a[1].split("-").map((a,b)=>0===b?a:a.charAt(0).toUpperCase()+a.substring(1)).join(""));let d=a[0](f(a[1]),...a.slice(3));d&&(e[a[2]]=d)}},P={Object3D(d,a){d.position.x=c(a("x"),0),d.position.y=c(a("y"),0),d.position.z=c(a("z"),0),d.rotation.x=c(a("rotation-x"),0),d.rotation.y=c(a("rotation-y"),0),d.rotation.z=c(a("rotation-z"),0),d.quaternion.x=c(a("quaternion-x"),0),d.quaternion.y=c(a("quaternion-y"),0),d.quaternion.z=c(a("quaternion-z"),0),d.scale.x=c(a("scale-x"),1),d.scale.y=c(a("scale-y"),1),d.scale.z=c(a("scale-z"),1),m([a("look-at-x"),a("look-at-y"),a("look-at-z")])&&d.lookAt(m([a("look-at-x"),a("look-at-y"),a("look-at-z")])),O(d,a,[[b,"cast-shadow"],[b,"visible"],[b,"frustum-culled"],[b,"matrix-auto-update"],[b,"matrix-world-needs-update"],[b,"receive-shadow"],[c,"render-order"]])},Light(a,b){P.Object3D(a,b),O(a,b,[[l,"color"],[c,"intensity"]])},BufferGeometry(a,c){O(a,c,[[b,"morph-attributes"]])},LatheGeometry(a,b){P.BufferGeometry(a,b)},BoxGeometry(a,b){P.BufferGeometry(a,b)},CapsuleGeometry(a,b){P.LatheGeometry(a,b)},CircleGeometry(a,b){P.BufferGeometry(a,b)},ConeGeometry(a,b){P.CylinderGeometry(a,b)},CylinderGeometry(a,b){P.BufferGeometry(a,b)},PolyhedronGeometry(a,b){P.BufferGeometry(a,b)},DodecahedronGeometry(a,b){P.PolyhedronGeometry(a,b)},IcosahedronGeometry(a,b){P.PolyhedronGeometry(a,b)},OctahedronGeometry(a,b){P.PolyhedronGeometry(a,b)},PlaneGeometry(a,b){P.BufferGeometry(a,b)},RingGeometry(a,b){P.BufferGeometry(a,b)},ShapeGeometry(a,b){P.BufferGeometry(a,b)},SphereGeometry(a,b){P.BufferGeometry(a,b)},TetrahedronGeometry(a,b){P.PolyhedronGeometry(a,b)},TorusGeometry(a,b){P.BufferGeometry(a,b)},TorusKnotGeometry(a,b){P.BufferGeometry(a,b)},TubeGeometry(a,b){P.BufferGeometry(a,b)},ConvexGeometry(a,b){P.BufferGeometry(a,b)},ExtrudeGeometry(a,b){P.BufferGeometry(a,b)},TextGeometry(a,b){P.ExtrudeGeometry(a,b)},Material(a,d){O(a,d,[[c,"alpha-test"],[c,"alpha-to-coverage"],[c,"blend-dst"],[c,"blend-dst-alpha"],[c,"blend-equation"],[c,"blend-equation-alpha"],[c,"blend-src"],[c,"blend-src-alpha"],[b,"clip-intersection"],[b,"clip-shadows"],[b,"color-write"],[J,"defines"],[c,"depth-func"],[b,"depth-test"],[b,"depth-write"],[b,"stencil-write"],[c,"stencil-write-mask"],[c,"stencil-func"],[c,"stencil-ref"],[c,"stencil-func-mask"],[c,"stencil-fail"],[c,"stencil-z-fail"],[C,"name"],[c,"opacity"],[b,"polygon-offset"],[c,"polygon-offset-factor"],[c,"polygon-offset-units"],[C,"precision",null,["highp","mediump","lowp"]],[b,"premultiplied-alpha"],[b,"dithering"],[K,"shadow-side"],[K,"side"],[b,"tone-mapped"],[b,"transparent"],[b,"visible"],])},MeshBasicMaterial(a,d){P.Material(a,d),O(a,d,[[l,"color"],[c,"combine"],[b,"fog"],[c,"reflectivity"],[c,"refraction-ratio"],[b,"wireframe"],[C,"wireframe-line-cap","wireframeLinecap",["round","butt","square"]],[C,"wireframe-line-join","wireframeLinejoin",["round","bevel","miter"]],[c,"wireframe-line-width","wireframeLinewidth"]])},MeshPhongMaterial(d,a){P.Material(d,a),m([a("normal-scale-x"),a("normal-scale-y")])&&(d.normalScale=m([a("normal-scale-x"),a("normal-scale-y")])),O(d,a,[[c,"ao-map-intensity"],[c,"bump-scale"],[l,"color"],[c,"combine"],[c,"displacement-scale"],[c,"displacement-bias"],[l,"emissive"],[c,"emissive-intensity"],[c,"flat-shading"],[b,"fog"],[c,"light-map-intensity"],[c,"normal-map-type"],[c,"reflectivity"],[c,"refraction-ratio"],[c,"shininess"],[l,"specular"],[b,"wireframe"],[C,"wireframe-line-cap","wireframeLinecap"],[C,"wireframe-line-join","wireframeLinejoin"],[c,"wireframe-line-width","wireframeLinewidth"]])},LineBasicMaterial(a,d){P.Material(a,d),O(a,d,[[l,"color"],[b,"fog"],[c,"line-width","linewidth"],[C,"line-cap","linecap"],[C,"line-join","linejoin"]])},LineDashedMaterial(a,b){P.LineBasicMaterial(a,b),O(a,b,[[c,"dash-size"],[c,"gap-size"],[c,"scale"]])},MeshDepthMaterial(a,d){O(a,d,[[c,"displacement-scale"],[c,"displacement-bias"],[b,"fog"],[b,"wireframe"],[c,"wireframe-line-width","wireframeLinewidth"]])},PointLight(a,b){P.Light(a,b),O(a,b,[[c,"decay"],[c,"distance"],[c,"power"]])},AmbientLight(a,b){P.Light(a,b)},AmbientLightProbe(a,b){P.Light(a,b)},DirectionalLight(a,c){P.Light(a,c),O(a,c,[[b,"cast-shadow"]])},HemisphereLight(a,b){P.Light(a,b),O(a,b,[[l,"ground-color"]])},RectAreaLight(a,b){P.Light(a,b),O(a,b,[[c,"height"],[c,"width"],[c,"power"]])},SpotLight(a,d){P.Light(a,d),O(a,d,[[c,"angle"],[b,"cast-shadow"],[c,"decay"],[c,"distance"],[c,"penumbra"],[c,"power"]])},OrbitControls(a,d){O(a,d,[[b,"auto-rotate"],[c,"auto-rotate-speed"],[c,"damping-factor"],[b,"enabled"],[b,"enable-damping"],[b,"enable-pan"],[b,"enable-rotate"],[b,"enable-zoom"],[c,"key-pan-speed"],[c,"max-azimuth-angle"],[c,"max-distance"],[c,"max-polar-angle"],[c,"max-zoom"],[c,"min-azimuth-angle"],[c,"min-distance"],[c,"min-polar-angle"],[c,"min-zoom"],[c,"pan-speed"],[c,"rotate-speed"],[b,"screen-space-panning"]]),["left","right","up","bottom"].forEach(b=>{d("key-"+b)&&(a.keys[b.toUpperCase()]=d("key-"+b.toUpperCase()))}),["left","right","middle"].forEach(b=>{R[d("mouse-"+b)]&&(a.mouseButtons[b.toUpperCase()]=R[d("mouse-"+b)])}),["one","two"].forEach(b=>{R[d("touch-"+b)]&&(a.touches[b.toUpperCase()]=R[d("touch-"+b)])})},ArcballControls(a,d){O(a,d,[[b,"adjust-near-far"],[b,"cursor-zoom"],[c,"damping-factor"],[b,"enabled"],[b,"enable-animations"],[b,"enable-grid"],[b,"enable-pan"],[b,"enable-rotate"],[b,"enable-zoom"],[c,"focus-animation-time"],[c,"max-distance"],[c,"max-zoom"],[c,"min-distance"],[c,"min-zoom"],[c,"scale-factor"],[c,"w-max"],[c,"radius-factor"]])},FlyControls(a,d){O(a,d,[[b,"auto-forward"],[b,"drag-to-look"],[c,"movement-speed"],[c,"roll-speed"]])},FirstPersonControls(a,d){O(a,d,[[b,"active-look"],[b,"auto-forward"],[b,"constrain-vertical"],[b,"enabled"],[c,"height-coef"],[c,"height-max"],[c,"height-min"],[c,"height-speed"],[b,"look-vertical"],[c,"look-speed"],[b,"mouse-drag-on"],[c,"movement-speed"],[c,"vertical-max"],[c,"vertical-min"]])},PointerLockControls(a,b){O(a,b,[[c,"max-polar-angle"],[c,"min-polar-angle"],[c,"pointer-speed"]])},TrackballControls(d,a){O(d,a,[[c,"dynamic-damping-factor"],[b,"enabled"],[c,"max-distance"],[c,"min-distance"],[b,"no-pan"],[b,"no-zoom"],[c,"pan-speed"],[c,"rotate-speed"],[b,"static-moving"],[c,"zoom-speed"]]),d.keys=[C(a("key-orbit"),"KeyA"),C(a("key-zoom"),"KeyS"),C(a("key-pan"),"KeyD")],["left","right","middle"].forEach(b=>{R[a("mouse-"+b)]&&(d.mouseButtons[b.toUpperCase()]=R[a("mouse-"+b)])})},Group(a,b){P.Object3D(a,b)}},D=a=>a.split("-").map(a=>a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()).join(""),n={async BoxGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.BoxGeometry(c(a("width"),1),c(a("height"),1),c(a("depth"),1),c(a("widthSegments"),1),c(a("heightSegments"),1),c(a("depthSegments"),1));return P.BoxGeometry(b,a),f&&F.set(e,b),b},async CapsuleGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.CapsuleGeometry(c(a("radius"),1),c(a("length"),1),c(a("cap-subdivisions"),8),c(a("radial-segments"),16));return P.CapsuleGeometry(b,a),f&&F.set(e,b),b},async CircleGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.CircleGeometry(c(a("radius"),1),c(a("segments"),8),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return P.CircleGeometry(b,a),f&&F.set(e,b),b},async ConeGeometry(e,f,g=!0,h=e.scene){let a=a=>f.getAttribute(a),d=new THREE.ConeGeometry(c(a("radius"),1),c(a("height"),1),c(a("radial-segments"),8),c(a("height-segments"),1),b(a("open-ended"),!1),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return P.ConeGeometry(d,a),g&&F.set(f,d),d},async CylinderGeometry(e,f,g=!0,h=e.scene){let a=a=>f.getAttribute(a),d=new THREE.CylinderGeometry(c(a("radius-top"),1),c(a("radius-bottom"),1),c(a("height"),1),c(a("radial-segments"),8),c(a("height-segments"),1),b(a("open-ended"),!1),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return P.CylinderGeometry(d,a),g&&F.set(f,d),d},async DodecahedronGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.DodecahedronGeometry(c(a("radius"),1),c(a("detail"),0));return P.DodecahedronGeometry(b,a),f&&F.set(e,b),b},async IcosahedronGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.IcosahedronGeometry(c(a("radius"),1),c(a("detail"),0));return P.IcosahedronGeometry(b,a),f&&F.set(e,b),b},async LatheGeometry(e,d,f=!0,h=e.scene){let a=a=>d.getAttribute(a),g=Array.from(d.children).filter(a=>"POINT"===a.tagName).map(a=>new THREE.Vector2(c(a.getAttribute("x"),0),c(a.getAttribute("y"),0))),b=new THREE.LatheGeometry(g,c(a("segments"),12),c(a("phiStart"),0),c(a("phiLength"),2*Math.PI));return P.LatheGeometry(b,a),f&&F.set(d,b),b},async OctahedronGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.OctahedronGeometry(c(a("radius"),1),c(a("detail"),0));return P.OctahedronGeometry(b,a),f&&F.set(e,b),b},async PlaneGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.PlaneGeometry(c(a("width"),1),c(a("height"),1),c(a("width-segments"),1),c(a("height-segments"),1));return P.PlaneGeometry(b,a),f&&F.set(e,b),b},async RingGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.RingGeometry(c(a("inner-radius"),.5),c(a("outer-radius"),1),c(a("theta-segments"),8),c(a("phi-segments"),1),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return P.RingGeometry(b,a),f&&F.set(e,b),b},async ShapeGeometry(f,b,g=!0,h=f.scene){let d=a=>b.getAttribute(a),e=L(Array.from(b.children).filter(a=>"SHAPE"===a.tagName).reverse()[0]);if(!e)return console.error("ShapeGeometry: No <shape> found");let a=new THREE.ShapeGeometry(e,c(d("curve-segments"),12));return P.ShapeGeometry(a,d),g&&F.set(b,a),a},async SphereGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.SphereGeometry(c(a("radius"),1),c(a("width-segments"),32),c(a("height-segments"),16),c(a("phi-start"),0),c(a("phi-length"),2*Math.PI),c(a("theta-start"),0),c(a("theta-length"),2*Math.PI));return P.SphereGeometry(b,a),f&&F.set(e,b),b},async TetrahedronGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.TetrahedronGeometry(c(a("radius"),1),c(a("detail"),0));return P.TetrahedronGeometry(b,a),f&&F.set(e,b),b},async TorusGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.TorusGeometry(c(a("radius"),1),c(a("tube"),.4),c(a("radial-segments"),8),c(a("tubular-segments"),6),c(a("arc"),2*Math.PI));return P.TorusGeometry(b,a),f&&F.set(e,b),b},async TorusKnotGeometry(d,e,f=!0,g=d.scene){let a=a=>e.getAttribute(a),b=new THREE.TorusKnotGeometry(c(a("radius"),1),c(a("tube"),.4),c(a("tubular-segments"),64),c(a("radial-segments"),8),c(a("p"),2),c(a("q"),3));return P.TorusKnotGeometry(b,a),f&&F.set(e,b),b},async TubeGeometry(g,e,h=!0,i=g.scene){let a=a=>e.getAttribute(a),f=M(Array.from(e.children).filter(a=>"CURVE"===a.tagName).reverse()[0]);if(!f)return console.error("TubeGeometry: No <curve> found");let d=new THREE.TubeGeometry(f,c(a("tubular-segments"),64),c(a("radius"),1),c(a("radial-segments"),8),b(a("closed"),!1));return P.TubeGeometry(d,a),h&&F.set(e,d),d},async ConvexGeometry(d,b,e=!0,h=d.scene){let f=a=>b.getAttribute(a);await y(_=>THREE.ConvexHull,"ConvexHull","https://threejs.org/examples/js/math/ConvexHull.js"),await y(_=>THREE.ConvexGeometry,"ConvexGeometry","https://threejs.org/examples/js/geometries/ConvexGeometry.js");let g=Array.from(b.children).filter(a=>"POINT"===a.tagName).map(a=>new THREE.Vector3(c(a.getAttribute("x"),0),c(a.getAttribute("y"),0),c(a.getAttribute("z"),0))),a=new THREE.ConvexGeometry(g);return P.ConvexGeometry(a,f),e&&F.set(b,a),a},async TextGeometry(d,e,h=!0,i=d.scene){let a=a=>e.getAttribute(a);await y(_=>!THREE.TextGeometry.toString().includes("console.error"),"TextGeometry","https://threejs.org/examples/js/geometries/TextGeometry.js");let g=d.fonts.find(b=>[b.name,b.src].includes(C(a("font"))))||d.fonts.find(b=>b.familyName===C(a("font")));if(!g)return console.warn("Font not found: "+C(a("font")));e.style.display="none";let f=new THREE.TextGeometry(C(e.innerText),{font:g.font,size:c(a("size"),100),height:c(a("height"),50),curveSegments:c(a("curve-segments"),12),bevelEnabled:b(a("bevel"),!1),bevelThickness:c(a("bevel-thickness"),10),bevelSize:c(a("bevel-size"),8),bevelOffset:c(a("bevel-offset"),0),bevelSegments:c(a("bevel-segments"),3)});return P.TextGeometry(f,a),h&&F.set(e,f),f},async MeshBasicMaterial(c,d,e=!0,g=c.scene){let f=a=>d.getAttribute(a),a={};P.MeshBasicMaterial(a,f);let b=new THREE.MeshBasicMaterial(a);return e&&F.set(d,b),b},async MeshPhongMaterial(c,d,e=!0,g=c.scene){let f=a=>d.getAttribute(a),a={};P.MeshPhongMaterial(a,f);let b=new THREE.MeshPhongMaterial(a);return e&&F.set(d,b),b},async LineBasicMaterial(c,d,e=!0,g=c.scene){let f=a=>d.getAttribute(a),a={};P.LineBasicMaterial(a,f);let b=new THREE.LineBasicMaterial(a);return e&&F.set(d,b),b},async LineDashedMaterial(c,d,e=!0,g=c.scene){let f=a=>d.getAttribute(a),a={};P.LineDashedMaterial(a,f);let b=new THREE.LineDashedMaterial(a);return e&&F.set(d,b),b},async MeshDepthMaterial(c,d,e=!0,g=c.scene){let f=a=>d.getAttribute(a),a={};P.MeshDepthMaterial(a,f);let b=new THREE.MeshDepthMaterial(a);return e&&F.set(d,b),b},async Mesh(d,h,i=!0,j=d.scene){let a=a=>h.getAttribute(a),g=b=>{let a=Array.from(h.children).filter(a=>a.tagName.endsWith(b)&&n[D(a.tagName)]).reverse()[0];if(a)return n[D(a.tagName)](d,a,b=>a.getAttribute(b))},e=a("geometry")?d.findObjectByQuery(a("geometry")):await g("-GEOMETRY");e instanceof THREE.BufferGeometry||(e=new THREE.BoxGeometry);let f=a("material")?d.findObjectByQuery(a("material")):await g("-MATERIAL");f instanceof THREE.Material||(f=new THREE.MeshBasicMaterial);let c=new THREE.Mesh(e,f);return N(c,a("behavior"),d),P.Object3D(c,a),b(a("register"),!0)&&j.add(c),i&&F.set(h,c),c},async PointLight(d,e,f=!0,g=d.scene){let c=a=>e.getAttribute(a),a=new THREE.PointLight;return N(a,c("behavior"),d),P.PointLight(a,c),b(c("register"),!0)&&g.add(a),f&&F.set(e,a),a},async AmbientLight(d,e,f=!0,g=d.scene){let c=a=>e.getAttribute(a),a=new THREE.AmbientLight;return N(a,c("behavior"),d),P.AmbientLight(a,c),b(c("register"),!0)&&g.add(a),f&&F.set(e,a),a},async AmbientLightProbe(d,e,f=!0,g=d.scene){let c=a=>e.getAttribute(a),a=new THREE.AmbientLightProbe;return N(a,c("behavior"),d),P.AmbientLightProbe(a,c),b(c("register"),!0)&&g.add(a),f&&F.set(e,a),a},async DirectionalLight(d,e,f=!0,g=d.scene){let c=a=>e.getAttribute(a),a=new THREE.DirectionalLight;return N(a,c("behavior"),d),P.DirectionalLight(a,c),b(c("register"),!0)&&g.add(a),f&&F.set(e,a),a},async HemisphereLight(d,e,f=!0,g=d.scene){let c=a=>e.getAttribute(a),a=new THREE.HemisphereLight;return N(a,c("behavior"),d),P.HemisphereLight(a,c),b(c("register"),!0)&&g.add(a),f&&F.set(e,a),a},async RectAreaLight(d,e,f=!0,g=d.scene){let c=a=>e.getAttribute(a),a=new THREE.RectAreaLight;return N(a,c("behavior"),d),P.RectAreaLight(a,c),b(c("register"),!0)&&g.add(a),f&&F.set(e,a),a},async SpotLight(d,e,f=!0,g=d.scene){let c=a=>e.getAttribute(a),a=new THREE.SpotLight;return N(a,c("behavior"),d),P.SpotLight(a,c),b(c("register"),!0)&&g.add(a),f&&F.set(e,a),a},async OrbitControls(a,c,d=!0,f=a.scene){let e=a=>c.getAttribute(a);await y(_=>THREE.OrbitControls,"OrbitControls","https://threejs.org/examples/js/controls/OrbitControls.js");let b=new THREE.OrbitControls(a.camera,a.renderer.domElement);return P.OrbitControls(b,e),a.orbitControls.push(b),d&&F.set(c,b),b},async ArcballControls(a,c,d=!0,f=a.scene){let e=a=>c.getAttribute(a);await y(_=>THREE.ArcballControls,"ArcballControls","https://threejs.org/examples/js/controls/ArcballControls.js");let b=new THREE.ArcballControls(a.camera,a.renderer.domElement);return P.ArcballControls(b,e),a.arcballControls.push(b),d&&F.set(c,b),b},async FlyControls(a,c,d=!0,f=a.scene){let e=a=>c.getAttribute(a);await y(_=>THREE.FlyControls,"FlyControls","https://threejs.org/examples/js/controls/FlyControls.js");let b=new THREE.FlyControls(a.camera,a.renderer.domElement);return P.FlyControls(b,e),a.flyControls.push(b),d&&F.set(c,b),b},async FirstPersonControls(a,c,d=!0,f=a.scene){let e=a=>c.getAttribute(a);await y(_=>THREE.FirstPersonControls,"FirstPersonControls","https://threejs.org/examples/js/controls/FirstPersonControls.js");let b=new THREE.FirstPersonControls(a.camera,a.renderer.domElement);return P.FirstPersonControls(b,e),a.firstPersonControls.push(b),d&&F.set(c,b),b},async PointerLockControls(b,c,d=!0,f=b.scene){let e=a=>c.getAttribute(a);await y(_=>THREE.PointerLockControls,"PointerLockControls","https://threejs.org/examples/js/controls/PointerLockControls.js");let a=new THREE.PointerLockControls(b.camera,b.renderer.domElement);return P.PointerLockControls(a,e),a.connect(),b.pointerLockControls.push(a),d&&F.set(c,a),a},async TrackballControls(a,c,d=!0,f=a.scene){let e=a=>c.getAttribute(a);await y(_=>THREE.TrackballControls,"TrackballControls","https://threejs.org/examples/js/controls/TrackballControls.js");let b=new THREE.TrackballControls(a.camera,a.renderer.domElement);return P.TrackballControls(b,e),a.trackballControls.push(b),d&&F.set(c,b),b},async Font(c,d,e=!0,f=c.scene){let b=a=>d.getAttribute(a);Q||(await y(_=>THREE.FontLoader.prototype.load,"FontLoader","https://threejs.org/examples/js/loaders/FontLoader.js"),Q=new THREE.FontLoader);let a=await new Promise(a=>Q.load(b("src"),a,_=>_,_=>a(null)));return(F.set(d,a),a)?(c.fonts.push({src:b("src"),name:b("name"),familyName:a.data.familyName,font:a}),e&&F.set(d,a),a):console.error("Failed to load font: "+b("src"))},async Group(c,f,g=!0,k=c.scene){let d=a=>f.getAttribute(a),a=new THREE.Group;N(a,d("behavior"),c),await P.Group(a,d);let h=Array.from(f.children);for(let e=0;e<h.length;e++){let i=h[e],j=D(i.tagName);n[j]&&await n[j](c,i,g,a)}return b(d("register"),!0)&&k.add(a),g&&F.set(f,a),a}},Q,R={ROTATE:THREE.MOUSE.ROTATE,rotate:THREE.MOUSE.ROTATE,PAN:THREE.MOUSE.PAN,pan:THREE.MOUSE.PAN,DOLLY:THREE.MOUSE.DOLLY,dolly:THREE.MOUSE.DOLLY};for(let h=0;h<k.length;h++){let i=k[h],e=document.createElement("canvas"),a=a=>i.getAttribute(a);e.width=a("width")||512,e.height=a("height")||512,i.appendChild(e);let E=new z,g=new A(c(a("fov"),75),e.width/e.height,c(a("near"),.1),c(a("far"),1e3)),o=new B({canvas:e,alpha:b(a("alpha"),!1),premultipliedAlpha:b(a("premultipliedAlpha"),!0),antialias:b(a("antialias"),!1),stencil:b(a("stencil"),!0),preserveDrawingBuffer:b(a("preserveDrawingBuffer"),!1),powerPreference:C(a("powerPreference"),["high-performance","low-power","default"],"default"),failIfMajorPerformanceCaveat:b(a("failIfMajorPerformanceCaveat"),!1),depth:b(a("depth"),!0),logarithmicDepthBuffer:b(a("logarithmicDepthBuffer"),!1)}),p=Array.from(i.children);l(a("background-color"))&&o.setClearColor(l(a("background-color"))),m([a("look-at-x"),a("look-at-y"),a("look-at-z")])&&g.lookAt(m([a("look-at-x"),a("look-at-y"),a("look-at-z")]));let d=new v(i,E,g,o);for(let j=0;j<p.length;j++){let q=p[j],r=D(q.tagName);n[r]&&await n[r](d,q)}g.rotation.set(c(a("rotation-x"),0),c(a("rotation-y"),0),c(a("rotation-z"),0)),g.position.set(c(a("x"),0),c(a("y"),0),c(a("z"),0)),d.orbitControls.forEach(a=>{a.target.x=g.position.x,a.target.y=g.position.y}),d.arcballControls.forEach(a=>a.update()),w.push(d),b(a("maximize"))&&d.maximize(),b(a("center"))&&(d.element.style.position="absolute",d.element.style.left="50%",d.element.style.top="50%",d.element.style.transform="translate(-50%, -50%)")}s(),x()})()