const __eval=[],_eval=e=>new Promise(t=>__eval.push([e,t]));setInterval(()=>{__eval.forEach(([code,r])=>{try{r({data:eval(code)})}catch(e){r({error:e})}}),__eval.length=0});const _eval2=(code,___args___)=>eval(`${Object.keys(___args___).map(e=>`const ${e}=___args___[${JSON.stringify(e)}];`).join("")}${code}`);(async()=>{let e={THREE:"https://unpkg.com/html3d/libs/three.min.js",ConvexHull:"https://unpkg.com/html3d/libs/ConvexHull.min.js",ConvexGeometry:"https://unpkg.com/html3d/libs/ConvexGeometry.min.js",TextGeometry:"https://unpkg.com/html3d/libs/TextGeometry.min.js",OrbitControls:"https://unpkg.com/html3d/libs/OrbitControls.min.js",ArcballControls:"https://unpkg.com/html3d/libs/ArcballControls.min.js",FlyControls:"https://unpkg.com/html3d/libs/FlyControls.min.js",FirstPersonControls:"https://unpkg.com/html3d/libs/FirstPersonControls.min.js",PointerLockControls:"https://unpkg.com/html3d/libs/PointerLockControls.min.js",TrackballControls:"https://unpkg.com/html3d/libs/TrackballControls.min.js",FontLoader:"https://unpkg.com/html3d/libs/FontLoader.min.js"},t="undefined"!=typeof module&&"undefined"!=typeof require?module.exports={}:window,r,n=new Promise(e=>r=e);t.html3d={version:"1.0.9",promise:n,findById:e=>l.find(t=>t.element.id===e),warnings:t.html3d?.warnings||{loadStart:!1,loadEnd:!0},width:t.innerWidth||500,height:t.innerHeight||400,_eval:_eval2};let a=new Map,i=new Promise(e=>addEventListener("load",e)),o=e=>{let t=e.children,r=[];for(let n=0;n<t.length;n++)r.push(t[n]),r.push(...o(t[n]));return r};class s{constructor(e,t,r,n){this.element=e,this.scene=t,this.camera=r,this.renderer=n,this.rendering=!0,this._f=[],this._listeners={},this.fonts=[],this.maximized=!1,this._lastMaximize=null,this.orbitControls=[],this.arcballControls=[],this.flyControls=[],this.firstPersonControls=[],this.pointerLockControls=[],this.trackballControls=[]}render(){this.emit("render"),this.emit("render.before"),this.orbitControls.forEach(e=>e.update()),this.flyControls.forEach(e=>e.update(e._clock.getDelta())),this.firstPersonControls.forEach(e=>e.update(e._clock.getDelta())),this.trackballControls.forEach(e=>e.update()),this.renderer.render(this.scene,this.camera),this._f.push(Date.now()+1e3),this._f=this._f.filter(e=>e>Date.now()),this.emit("render.after")}get canvas(){return this.renderer.domElement}get fps(){return this._f.length}get objects(){return this.scene.children}maximize(){this.maximized||(this._lastMaximize=[this.canvas.width,this.canvas.height]),this.maximized=!0,this.onResize()}unmaximize(){this.maximized=!1,this._lastMaximize&&(this.canvas.width=this._lastMaximize[0],this.canvas.height=this._lastMaximize[1]),this._lastMaximize=null,this.onResize()}onResize(){t.html3d.width=t.innerWidth||t.html3d.width,t.html3d.height=t.innerHeight||t.html3d.height,this.emit("resize"),this.maximized&&(this.canvas.width=t.html3d.width,this.canvas.height=t.html3d.height);let{width:e,height:r}=this.canvas;this.camera.aspect=e/r,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,r),this.trackballControls.forEach(e=>e.update())}findById(e){return o(this.element).find(t=>t.id===e)}findByClass(e){return Array.from(this.element.getElementsByClassName(e))}findByTag(e){return Array.from(this.element.getElementsByTagName(e))}findByName(e){return o(this.element).find(t=>t.name===e)}findByQuery(e){return this.element.querySelector(e)}findObjectByElement(e){return a.get(e)}findObjectById(e){return this.findObjectByElement(this.findById(e))}findObjectByClass(e){return this.findObjectByElement(this.findByClass(e)[0])}findObjectByTag(e){return this.findObjectByElement(this.findByTag(e)[0])}findObjectByName(e){return this.findObjectByElement(this.findByName(e)[0])}findObjectByQuery(e){return this.findObjectByElement(this.findByQuery(e))}findObjectsByClass(e){return this.findByClass(e).map(e=>this.findObjectByElement(e))}findObjectsByTag(e){return this.findByTag(e).map(e=>this.findObjectByElement(e))}findObjectsByName(e){return this.findByName(e).map(e=>this.findObjectByElement(e))}on(e,t){this._listeners[e]=[...this._listeners[e]||[],[t,!0]]}once(e,t){this._listeners[e]=[...this._listeners[e]||[],[t,!1]]}off(e,t){this._listeners[e]=this._listeners[e].filter(e=>e[0]!==t)}async emit(e,...t){let r=this._listeners[e]||[];for(let n=0;n<r.length;n++){let a=r[n];await a[0](...t)}this._listeners[e]=r.filter(e=>e[1])}}let l=[];addEventListener("resize",()=>l.forEach(e=>e.onResize()));let c=()=>{for(let e=0;e<l.length;e++)l[e].rendering&&l[e].render();requestAnimationFrame(c)};await i;let d=document.querySelectorAll("html3d"),h=e=>new Promise(t=>{let r=document.createElement("script");r.src=e,r.onload=()=>{t(),r.remove()},document.body.appendChild(r)}),m=async(e,r,n)=>{try{if(!await e())throw Error()}catch(a){t.html3d.warnings.loadStart&&console.info("%cCouldn't find "+r+", trying to load it...","color:#ff0000"),await h(n),t.html3d.warnings.loadEnd&&console.info("%c"+r+" has been loaded.","color:#00ff00")}};await m(e=>THREE,"ThreeJS",e.THREE);let{Scene:$,PerspectiveCamera:f,WebGLRenderer:u}=THREE,g={front:THREE.FrontSide,back:THREE.BackSide,double:THREE.DoubleSide},y=(e,r)=>{if("number"==typeof e)return e;if(!e)return r;e=e.replaceAll("pi",Math.PI);try{let{sin:n,cos:a,tan:i,asin:o,acos:s,atan:l,atan2:c,sqrt:d,pow:h,abs:m,log:$,log2:f,log10:u,exp:g,min:y,max:b,floor:p,ceil:x,round:w,sign:C,PI:G,LN2:k,E:v,cosh:_,cbrt:A,imul:L,sinh:B,LN10:E,acosh:P,tanh:z,asinh:M,atanh:T,hypot:j,clz32:O,expm1:S,fround:D,log1p:I,LOG2E:N,LOG10E:F,random:R,SQRT1_2:q,SQRT2:H,trunc:U}=Math;[..."+-*/^()"].some(t=>e.includes(t))&&(e=t.html3d._eval(e,{sin:n,cos:a,tan:i,asin:o,acos:s,atan:l,atan2:c,sqrt:d,pow:h,abs:m,log:$,log2:f,log10:u,exp:g,min:y,max:b,floor:p,ceil:x,round:w,sign:C,PI:G,LN2:k,E:v,cosh:_,cbrt:A,imul:L,sinh:B,LN10:E,acosh:P,tanh:z,asinh:M,atanh:T,hypot:j,clz32:O,expm1:S,fround:D,log1p:I,LOG2E:N,LOG10E:F,random:R,SQRT1_2:q,SQRT2:H,trunc:U}).toString())}catch(V){}return isNaN(1*e)?r:1*e},b=(e,t)=>null!==e?"false"!==e:t,p=(e,t,r)=>!t||t.includes(e)?e:r,x=(e,t)=>{let r={black:0,silver:12632256,white:16777215,yellow:16776960,blue:255,teal:32896,aqua:65535,aliceblue:15792383,antiquewhite:16444375,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,blanchedalmond:16772045,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,whitesmoke:16119285,yellowgreen:10145074};if(r[e])return r[e];let n=y(e,t);return(/^#[0-9a-f]{6}$/i.test(e)&&(n=y(e.replace("#","0x"),t)),/^#[0-9a-f]{3}$/i.test(e)&&(n=y("0x"+e.replace("#","")+e.replace("#",""),t)),/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/.test(e)&&(n=y("0x"+e.substring(4).split("").reverse().slice(1).reverse().join("").split(",").map(e=>(1*e.trimStart().trimEnd()||0).toString(16)).join(""),t)),isNaN(1*n))?t:n},w=(e,t)=>e.some(e=>!y(e))?t:2===(e=e.map(y)).length?new THREE.Vector2(...e):3===e.length?new THREE.Vector3(...e):4===e.length?new THREE.Vector4(...e):t,C=(e,t)=>{try{return JSON.parse(e)}catch(r){return t}},G=(e,t)=>g[e]||t,k=e=>{let t=new THREE.Shape,r=Array.from(e.children);for(let n=0;n<r.length;n++){let a=r[n];if("PATH"===a.tagName){let i=a.getAttribute("d").toString(),o=i.split(" "),s=null,l=()=>{if(s){switch(s){case"M":case"MOVE":case"MV":t.moveTo(...c);break;case"L":case"LINE":case"LN":t.lineTo(...c);break;case"Q":case"QUADRATIC":case"QD":case"QC":t.quadraticCurveTo(...c);break;case"C":case"B":case"BC":case"BEZIER":case"BZ":t.bezierCurveTo(...c);break;case"Z":case"CLOSE":case"CL":t.closePath()}c.length=0}},c=[];for(let d=0;d<o.length;d++){let h=o[d];[..."MLQCZB","MOVE","MV","LINE","LN","QUADRATIC","QD","QC","BEZIER","BZ","CLOSE","CL"].includes(h[0])?(l(),s=h[0]):h&&c.push(y(h,0))}l()}}return t},v=e=>new class extends THREE.Curve{getPoint(t,r=new THREE.Vector3){let n=t=>e?e.getAttribute(t):null,a=3*t-1.5,i=Math.sin(2*Math.PI*t);return r.set(y(n("tx"),a),y(n("ty"),i),y(n("tz"),0)).multiplyScalar(y(n("scalar"),5))}},_=(e,r,n)=>{if(!r)return;let a=[],i={x:"object.position.x",y:"object.position.y",z:"object.position.z",rx:"object.rotation.x",ry:"object.rotation.y",rz:"object.rotation.z",sx:"object.scale.x",sy:"object.scale.y",sz:"object.scale.z"},o=r.split(";");for(let s=0;s<o.length;s++){let l=o[s].trim();if(l){if(/^\s*\w+\s*((\*\*)|\||&|[+\-*/])?\s*=\s*.+$/.test(l)){let c=l.indexOf("="),d=l.substring(0,c-1).trim(),h=l.substring(d.length,c+1).trim(),m=l.substring(c+1).trim();if(!i[d])return console.error(`[BEHAVIOR] Couldn't find the variable named ${d} at line ${s+1}: ${l}
Note: Variables: ${Object.keys(i).join()}`);a.push([d,h,m,s,l])}else console.error(`[BEHAVIOR] Invalid behavior at line ${s+1}: ${l}`)}}n.on("render.before",e._behaviorFunc=()=>{a.forEach(r=>{try{let{sin:n,cos:o,tan:s,asin:l,acos:c,atan:d,atan2:h,sqrt:m,pow:$,abs:f,log:u,log2:g,log10:y,exp:b,min:p,max:x,floor:w,ceil:C,round:G,sign:k,LN2:v,E:_,cosh:A,cbrt:L,imul:B,sinh:E,LN10:P,acosh:z,tanh:M,asinh:T,atanh:j,hypot:O,clz32:S,expm1:D,fround:I,log1p:N,LOG2E:F,LOG10E:R,random:q,SQRT1_2:H,SQRT2:U,trunc:V,PI:Q}=Math;t.html3d._eval(i[r[0]]+r[1]+r[2],{object:e})}catch(K){return a=a.filter(e=>e!==r),console.error(`[BEHAVIOR] Couldn't parse the value at line ${r[3]+1}: ${r[2]}`)}})})},A=(e,t,r)=>{for(let n=0;n<r.length;n++){let a=r[n];a[2]||(a[2]=a[1].split("-").map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.substring(1)).join(""));let i=a[0](t(a[1]),...a.slice(3));i&&(e[a[2]]=i)}},L={Object3D(e,t){e.position.x=y(t("x"),0),e.position.y=y(t("y"),0),e.position.z=y(t("z"),0),e.rotation.x=y(t("rotation-x"),0),e.rotation.y=y(t("rotation-y"),0),e.rotation.z=y(t("rotation-z"),0),e.quaternion.x=y(t("quaternion-x"),0),e.quaternion.y=y(t("quaternion-y"),0),e.quaternion.z=y(t("quaternion-z"),0),e.scale.x=y(t("scale-x"),1),e.scale.y=y(t("scale-y"),1),e.scale.z=y(t("scale-z"),1),w([t("look-at-x"),t("look-at-y"),t("look-at-z")])&&e.lookAt(w([t("look-at-x"),t("look-at-y"),t("look-at-z")])),A(e,t,[[b,"cast-shadow"],[b,"visible"],[b,"frustum-culled"],[b,"matrix-auto-update"],[b,"matrix-world-needs-update"],[b,"receive-shadow"],[y,"render-order"]])},Light(e,t){L.Object3D(e,t),A(e,t,[[x,"color"],[y,"intensity"]])},BufferGeometry(e,t){A(e,t,[[b,"morph-attributes"]])},LatheGeometry(e,t){L.BufferGeometry(e,t)},BoxGeometry(e,t){L.BufferGeometry(e,t)},CapsuleGeometry(e,t){L.LatheGeometry(e,t)},CircleGeometry(e,t){L.BufferGeometry(e,t)},ConeGeometry(e,t){L.CylinderGeometry(e,t)},CylinderGeometry(e,t){L.BufferGeometry(e,t)},PolyhedronGeometry(e,t){L.BufferGeometry(e,t)},DodecahedronGeometry(e,t){L.PolyhedronGeometry(e,t)},IcosahedronGeometry(e,t){L.PolyhedronGeometry(e,t)},OctahedronGeometry(e,t){L.PolyhedronGeometry(e,t)},PlaneGeometry(e,t){L.BufferGeometry(e,t)},RingGeometry(e,t){L.BufferGeometry(e,t)},ShapeGeometry(e,t){L.BufferGeometry(e,t)},SphereGeometry(e,t){L.BufferGeometry(e,t)},TetrahedronGeometry(e,t){L.PolyhedronGeometry(e,t)},TorusGeometry(e,t){L.BufferGeometry(e,t)},TorusKnotGeometry(e,t){L.BufferGeometry(e,t)},TubeGeometry(e,t){L.BufferGeometry(e,t)},ConvexGeometry(e,t){L.BufferGeometry(e,t)},ExtrudeGeometry(e,t){L.BufferGeometry(e,t)},TextGeometry(e,t){L.ExtrudeGeometry(e,t)},Material(e,t){A(e,t,[[y,"alpha-test"],[y,"alpha-to-coverage"],[y,"blend-dst"],[y,"blend-dst-alpha"],[y,"blend-equation"],[y,"blend-equation-alpha"],[y,"blend-src"],[y,"blend-src-alpha"],[b,"clip-intersection"],[b,"clip-shadows"],[b,"color-write"],[C,"defines"],[y,"depth-func"],[b,"depth-test"],[b,"depth-write"],[b,"stencil-write"],[y,"stencil-write-mask"],[y,"stencil-func"],[y,"stencil-ref"],[y,"stencil-func-mask"],[y,"stencil-fail"],[y,"stencil-z-fail"],[p,"name"],[y,"opacity"],[b,"polygon-offset"],[y,"polygon-offset-factor"],[y,"polygon-offset-units"],[p,"precision",null,["highp","mediump","lowp"]],[b,"premultiplied-alpha"],[b,"dithering"],[G,"shadow-side"],[G,"side"],[b,"tone-mapped"],[b,"transparent"],[b,"visible"],])},MeshBasicMaterial(e,t){L.Material(e,t),A(e,t,[[x,"color"],[y,"combine"],[b,"fog"],[y,"reflectivity"],[y,"refraction-ratio"],[b,"wireframe"],[p,"wireframe-line-cap","wireframeLinecap",["round","butt","square"]],[p,"wireframe-line-join","wireframeLinejoin",["round","bevel","miter"]],[y,"wireframe-line-width","wireframeLinewidth"]])},MeshPhongMaterial(e,t){L.Material(e,t),w([t("normal-scale-x"),t("normal-scale-y")])&&(e.normalScale=w([t("normal-scale-x"),t("normal-scale-y")])),A(e,t,[[y,"ao-map-intensity"],[y,"bump-scale"],[x,"color"],[y,"combine"],[y,"displacement-scale"],[y,"displacement-bias"],[x,"emissive"],[y,"emissive-intensity"],[y,"flat-shading"],[b,"fog"],[y,"light-map-intensity"],[y,"normal-map-type"],[y,"reflectivity"],[y,"refraction-ratio"],[y,"shininess"],[x,"specular"],[b,"wireframe"],[p,"wireframe-line-cap","wireframeLinecap"],[p,"wireframe-line-join","wireframeLinejoin"],[y,"wireframe-line-width","wireframeLinewidth"]])},LineBasicMaterial(e,t){L.Material(e,t),A(e,t,[[x,"color"],[b,"fog"],[y,"line-width","linewidth"],[p,"line-cap","linecap"],[p,"line-join","linejoin"]])},LineDashedMaterial(e,t){L.LineBasicMaterial(e,t),A(e,t,[[y,"dash-size"],[y,"gap-size"],[y,"scale"]])},MeshDepthMaterial(e,t){A(e,t,[[y,"displacement-scale"],[y,"displacement-bias"],[b,"fog"],[b,"wireframe"],[y,"wireframe-line-width","wireframeLinewidth"]])},PointLight(e,t){L.Light(e,t),A(e,t,[[y,"decay"],[y,"distance"],[y,"power"]])},AmbientLight(e,t){L.Light(e,t)},AmbientLightProbe(e,t){L.Light(e,t)},DirectionalLight(e,t){L.Light(e,t),A(e,t,[[b,"cast-shadow"]])},HemisphereLight(e,t){L.Light(e,t),A(e,t,[[x,"ground-color"]])},RectAreaLight(e,t){L.Light(e,t),A(e,t,[[y,"height"],[y,"width"],[y,"power"]])},SpotLight(e,t){L.Light(e,t),A(e,t,[[y,"angle"],[b,"cast-shadow"],[y,"decay"],[y,"distance"],[y,"penumbra"],[y,"power"]])},OrbitControls(e,t){A(e,t,[[b,"auto-rotate"],[y,"auto-rotate-speed"],[y,"damping-factor"],[b,"enabled"],[b,"enable-damping"],[b,"enable-pan"],[b,"enable-rotate"],[b,"enable-zoom"],[y,"key-pan-speed"],[y,"max-azimuth-angle"],[y,"max-distance"],[y,"max-polar-angle"],[y,"max-zoom"],[y,"min-azimuth-angle"],[y,"min-distance"],[y,"min-polar-angle"],[y,"min-zoom"],[y,"pan-speed"],[y,"rotate-speed"],[b,"screen-space-panning"]]),["left","right","up","bottom"].forEach(r=>{t("key-"+r)&&(e.keys[r.toUpperCase()]=t("key-"+r.toUpperCase()))}),["left","right","middle"].forEach(r=>{z[t("mouse-"+r)]&&(e.mouseButtons[r.toUpperCase()]=z[t("mouse-"+r)])}),["one","two"].forEach(r=>{z[t("touch-"+r)]&&(e.touches[r.toUpperCase()]=z[t("touch-"+r)])})},ArcballControls(e,t){A(e,t,[[b,"adjust-near-far"],[b,"cursor-zoom"],[y,"damping-factor"],[b,"enabled"],[b,"enable-animations"],[b,"enable-grid"],[b,"enable-pan"],[b,"enable-rotate"],[b,"enable-zoom"],[y,"focus-animation-time"],[y,"max-distance"],[y,"max-zoom"],[y,"min-distance"],[y,"min-zoom"],[y,"scale-factor"],[y,"w-max"],[y,"radius-factor"]])},FlyControls(e,t){A(e,t,[[b,"auto-forward"],[b,"drag-to-look"],[y,"movement-speed"],[y,"roll-speed"]])},FirstPersonControls(e,t){A(e,t,[[b,"active-look"],[b,"auto-forward"],[b,"constrain-vertical"],[b,"enabled"],[y,"height-coef"],[y,"height-max"],[y,"height-min"],[y,"height-speed"],[b,"look-vertical"],[y,"look-speed"],[b,"mouse-drag-on"],[y,"movement-speed"],[y,"vertical-max"],[y,"vertical-min"]])},PointerLockControls(e,t){A(e,t,[[y,"max-polar-angle"],[y,"min-polar-angle"],[y,"pointer-speed"]])},TrackballControls(e,t){A(e,t,[[y,"dynamic-damping-factor"],[b,"enabled"],[y,"max-distance"],[y,"min-distance"],[b,"no-pan"],[b,"no-zoom"],[y,"pan-speed"],[y,"rotate-speed"],[b,"static-moving"],[y,"zoom-speed"]]),e.keys=[p(t("key-orbit"),"KeyA"),p(t("key-zoom"),"KeyS"),p(t("key-pan"),"KeyD")],["left","right","middle"].forEach(r=>{z[t("mouse-"+r)]&&(e.mouseButtons[r.toUpperCase()]=z[t("mouse-"+r)])})},Group(e,t){L.Object3D(e,t)}},B=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()).join(""),E={async BoxGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.BoxGeometry(y(i("width"),1),y(i("height"),1),y(i("depth"),1),y(i("widthSegments"),1),y(i("heightSegments"),1),y(i("depthSegments"),1));return L.BoxGeometry(o,i),r&&a.set(t,o),o},async CapsuleGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.CapsuleGeometry(y(i("radius"),1),y(i("length"),1),y(i("cap-subdivisions"),8),y(i("radial-segments"),16));return L.CapsuleGeometry(o,i),r&&a.set(t,o),o},async CircleGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.CircleGeometry(y(i("radius"),1),y(i("segments"),8),y(i("theta-start"),0),y(i("theta-length"),2*Math.PI));return L.CircleGeometry(o,i),r&&a.set(t,o),o},async ConeGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.ConeGeometry(y(i("radius"),1),y(i("height"),1),y(i("radial-segments"),8),y(i("height-segments"),1),b(i("open-ended"),!1),y(i("theta-start"),0),y(i("theta-length"),2*Math.PI));return L.ConeGeometry(o,i),r&&a.set(t,o),o},async CylinderGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.CylinderGeometry(y(i("radius-top"),1),y(i("radius-bottom"),1),y(i("height"),1),y(i("radial-segments"),8),y(i("height-segments"),1),b(i("open-ended"),!1),y(i("theta-start"),0),y(i("theta-length"),2*Math.PI));return L.CylinderGeometry(o,i),r&&a.set(t,o),o},async DodecahedronGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.DodecahedronGeometry(y(i("radius"),1),y(i("detail"),0));return L.DodecahedronGeometry(o,i),r&&a.set(t,o),o},async IcosahedronGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.IcosahedronGeometry(y(i("radius"),1),y(i("detail"),0));return L.IcosahedronGeometry(o,i),r&&a.set(t,o),o},async LatheGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=Array.from(t.children).filter(e=>"POINT"===e.tagName).map(e=>new THREE.Vector2(y(e.getAttribute("x"),0),y(e.getAttribute("y"),0))),s=new THREE.LatheGeometry(o,y(i("segments"),12),y(i("phiStart"),0),y(i("phiLength"),2*Math.PI));return L.LatheGeometry(s,i),r&&a.set(t,s),s},async OctahedronGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.OctahedronGeometry(y(i("radius"),1),y(i("detail"),0));return L.OctahedronGeometry(o,i),r&&a.set(t,o),o},async PlaneGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.PlaneGeometry(y(i("width"),1),y(i("height"),1),y(i("width-segments"),1),y(i("height-segments"),1));return L.PlaneGeometry(o,i),r&&a.set(t,o),o},async RingGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.RingGeometry(y(i("inner-radius"),.5),y(i("outer-radius"),1),y(i("theta-segments"),8),y(i("phi-segments"),1),y(i("theta-start"),0),y(i("theta-length"),2*Math.PI));return L.RingGeometry(o,i),r&&a.set(t,o),o},async ShapeGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=k(Array.from(t.children).filter(e=>"SHAPE"===e.tagName).reverse()[0]);if(!o)return console.error("ShapeGeometry: No <shape> found");let s=new THREE.ShapeGeometry(o,y(i("curve-segments"),12));return L.ShapeGeometry(s,i),r&&a.set(t,s),s},async SphereGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.SphereGeometry(y(i("radius"),1),y(i("width-segments"),32),y(i("height-segments"),16),y(i("phi-start"),0),y(i("phi-length"),2*Math.PI),y(i("theta-start"),0),y(i("theta-length"),2*Math.PI));return L.SphereGeometry(o,i),r&&a.set(t,o),o},async TetrahedronGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.TetrahedronGeometry(y(i("radius"),1),y(i("detail"),0));return L.TetrahedronGeometry(o,i),r&&a.set(t,o),o},async TorusGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.TorusGeometry(y(i("radius"),1),y(i("tube"),.4),y(i("radial-segments"),8),y(i("tubular-segments"),6),y(i("arc"),2*Math.PI));return L.TorusGeometry(o,i),r&&a.set(t,o),o},async TorusKnotGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.TorusKnotGeometry(y(i("radius"),1),y(i("tube"),.4),y(i("tubular-segments"),64),y(i("radial-segments"),8),y(i("p"),2),y(i("q"),3));return L.TorusKnotGeometry(o,i),r&&a.set(t,o),o},async TubeGeometry(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=v(Array.from(t.children).filter(e=>"CURVE"===e.tagName).reverse()[0]);if(!o)return console.error("TubeGeometry: No <curve> found");let s=new THREE.TubeGeometry(o,y(i("tubular-segments"),64),y(i("radius"),1),y(i("radial-segments"),8),b(i("closed"),!1));return L.TubeGeometry(s,i),r&&a.set(t,s),s},async ConvexGeometry(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>THREE.ConvexHull,"ConvexHull",e.ConvexHull),await m(e=>THREE.ConvexGeometry,"ConvexGeometry",e.ConvexGeometry);let s=Array.from(r.children).filter(e=>"POINT"===e.tagName).map(e=>new THREE.Vector3(y(e.getAttribute("x"),0),y(e.getAttribute("y"),0),y(e.getAttribute("z"),0))),l=new THREE.ConvexGeometry(s);return L.ConvexGeometry(l,o),n&&a.set(r,l),l},async TextGeometry(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>!THREE.TextGeometry.toString().includes("console.error"),"TextGeometry",e.TextGeometry);let s=t.fonts.find(e=>[e.name,e.src].includes(p(o("font"))))||t.fonts.find(e=>e.familyName===p(o("font")));if(!s)return console.warn("Font not found: "+p(o("font")));r.style.display="none";let l=new THREE.TextGeometry(p(r.innerText),{font:s.font,size:y(o("size"),100),height:y(o("height"),50),curveSegments:y(o("curve-segments"),12),bevelEnabled:b(o("bevel"),!1),bevelThickness:y(o("bevel-thickness"),10),bevelSize:y(o("bevel-size"),8),bevelOffset:y(o("bevel-offset"),0),bevelSegments:y(o("bevel-segments"),3)});return L.TextGeometry(l,o),n&&a.set(r,l),l},async MeshBasicMaterial(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o={};L.MeshBasicMaterial(o,i);let s=new THREE.MeshBasicMaterial(o);return r&&a.set(t,s),s},async MeshPhongMaterial(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o={};L.MeshPhongMaterial(o,i);let s=new THREE.MeshPhongMaterial(o);return r&&a.set(t,s),s},async LineBasicMaterial(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o={};L.LineBasicMaterial(o,i);let s=new THREE.LineBasicMaterial(o);return r&&a.set(t,s),s},async LineDashedMaterial(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o={};L.LineDashedMaterial(o,i);let s=new THREE.LineDashedMaterial(o);return r&&a.set(t,s),s},async MeshDepthMaterial(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o={};L.MeshDepthMaterial(o,i);let s=new THREE.MeshDepthMaterial(o);return r&&a.set(t,s),s},async Mesh(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=r=>{let n=Array.from(t.children).filter(e=>e.tagName.endsWith(r)&&E[B(e.tagName)]).reverse()[0];if(n)return E[B(n.tagName)](e,n,e=>n.getAttribute(e))},s=i("geometry")?e.findObjectByQuery(i("geometry")):await o("-GEOMETRY");s instanceof THREE.BufferGeometry||(s=new THREE.BoxGeometry);let l=i("material")?e.findObjectByQuery(i("material")):await o("-MATERIAL");l instanceof THREE.Material||(l=new THREE.MeshBasicMaterial);let c=new THREE.Mesh(s,l);return _(c,i("behavior"),e),L.Object3D(c,i),b(i("register"),!0)&&n.add(c),r&&a.set(t,c),c},async PointLight(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.PointLight;return _(o,i("behavior"),e),L.PointLight(o,i),b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o},async AmbientLight(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.AmbientLight;return _(o,i("behavior"),e),L.AmbientLight(o,i),b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o},async AmbientLightProbe(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.AmbientLightProbe;return _(o,i("behavior"),e),L.AmbientLightProbe(o,i),b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o},async DirectionalLight(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.DirectionalLight;return _(o,i("behavior"),e),L.DirectionalLight(o,i),b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o},async HemisphereLight(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.HemisphereLight;return _(o,i("behavior"),e),L.HemisphereLight(o,i),b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o},async RectAreaLight(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.RectAreaLight;return _(o,i("behavior"),e),L.RectAreaLight(o,i),b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o},async SpotLight(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.SpotLight;return _(o,i("behavior"),e),L.SpotLight(o,i),b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o},async OrbitControls(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>THREE.OrbitControls,"OrbitControls",e.OrbitControls);let s=new THREE.OrbitControls(t.camera,t.renderer.domElement);return L.OrbitControls(s,o),t.orbitControls.push(s),n&&a.set(r,s),s},async ArcballControls(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>THREE.ArcballControls,"ArcballControls",e.ArcballControls);let s=new THREE.ArcballControls(t.camera,t.renderer.domElement);return L.ArcballControls(s,o),t.arcballControls.push(s),n&&a.set(r,s),s},async FlyControls(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>THREE.FlyControls,"FlyControls",e.FlyControls);let s=new THREE.FlyControls(t.camera,t.renderer.domElement);return L.FlyControls(s,o),t.flyControls.push(s),n&&a.set(r,s),s},async FirstPersonControls(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>THREE.FirstPersonControls,"FirstPersonControls",e.FirstPersonControls);let s=new THREE.FirstPersonControls(t.camera,t.renderer.domElement);return L.FirstPersonControls(s,o),t.firstPersonControls.push(s),n&&a.set(r,s),s},async PointerLockControls(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>THREE.PointerLockControls,"PointerLockControls",e.PointerLockControls);let s=new THREE.PointerLockControls(t.camera,t.renderer.domElement);return L.PointerLockControls(s,o),s.connect(),t.pointerLockControls.push(s),n&&a.set(r,s),s},async TrackballControls(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);await m(e=>THREE.TrackballControls,"TrackballControls",e.TrackballControls);let s=new THREE.TrackballControls(t.camera,t.renderer.domElement);return L.TrackballControls(s,o),t.trackballControls.push(s),n&&a.set(r,s),s},async Font(t,r,n=!0,i=t.scene){let o=e=>r.getAttribute(e);P||(await m(e=>THREE.FontLoader.prototype.load,"FontLoader",e.FontLoader),P=new THREE.FontLoader);let s=await new Promise(e=>P.load(o("src"),e,e=>e,t=>e(null)));return(a.set(r,s),s)?(t.fonts.push({src:o("src"),name:o("name"),familyName:s.data.familyName,font:s}),n&&a.set(r,s),s):console.error("Failed to load font: "+o("src"))},async Group(e,t,r=!0,n=e.scene){let i=e=>t.getAttribute(e),o=new THREE.Group;_(o,i("behavior"),e),await L.Group(o,i);let s=Array.from(t.children);for(let l=0;l<s.length;l++){let c=s[l],d=B(c.tagName);E[d]&&await E[d](e,c,r,o)}return b(i("register"),!0)&&n.add(o),r&&a.set(t,o),o}},P,z={ROTATE:THREE.MOUSE.ROTATE,rotate:THREE.MOUSE.ROTATE,PAN:THREE.MOUSE.PAN,pan:THREE.MOUSE.PAN,DOLLY:THREE.MOUSE.DOLLY,dolly:THREE.MOUSE.DOLLY};for(let M=0;M<d.length;M++){let T=d[M],j=document.createElement("canvas"),O=e=>T.getAttribute(e);j.width=O("width")||512,j.height=O("height")||512,T.appendChild(j);let S=new $,D=new f(y(O("fov"),75),j.width/j.height,y(O("near"),.1),y(O("far"),1e3)),I=new u({canvas:j,alpha:b(O("alpha"),!1),premultipliedAlpha:b(O("premultipliedAlpha"),!0),antialias:b(O("antialias"),!1),stencil:b(O("stencil"),!0),preserveDrawingBuffer:b(O("preserveDrawingBuffer"),!1),powerPreference:p(O("powerPreference"),["high-performance","low-power","default"],"default"),failIfMajorPerformanceCaveat:b(O("failIfMajorPerformanceCaveat"),!1),depth:b(O("depth"),!0),logarithmicDepthBuffer:b(O("logarithmicDepthBuffer"),!1)}),N=Array.from(T.children);x(O("background-color"))&&I.setClearColor(x(O("background-color"))),w([O("look-at-x"),O("look-at-y"),O("look-at-z")])&&D.lookAt(w([O("look-at-x"),O("look-at-y"),O("look-at-z")]));let F=new s(T,S,D,I);for(let R=0;R<N.length;R++){let q=N[R],H=B(q.tagName);E[H]&&await E[H](F,q)}D.rotation.set(y(O("rotation-x"),0),y(O("rotation-y"),0),y(O("rotation-z"),0)),D.position.set(y(O("x"),0),y(O("y"),0),y(O("z"),0)),F.orbitControls.forEach(e=>{e.target.x=D.position.x,e.target.y=D.position.y}),F.arcballControls.forEach(e=>e.update()),l.push(F),b(O("maximize"))&&F.maximize(),b(O("center"))&&(F.element.style.position="absolute",F.element.style.left="50%",F.element.style.top="50%",F.element.style.transform="translate(-50%, -50%)")}r(),c()})();